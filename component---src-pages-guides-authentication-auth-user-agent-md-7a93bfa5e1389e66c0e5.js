(self.webpackChunkdev_site_documentation_template=self.webpackChunkdev_site_documentation_template||[]).push([[50441],{69646:function(e,t,a){"use strict";a.r(t),a.d(t,{_frontmatter:function(){return c},default:function(){return r}});var i=a(22122),n=a(19756),o=(a(15007),a(64983)),p=a(99536),s=["components"],c={},l={_frontmatter:c},d=p.Z;function r(e){var t=e.components,a=(0,n.Z)(e,s);return(0,o.mdx)(d,(0,i.Z)({},l,a,{components:t,mdxType:"MDXLayout"}),(0,o.mdx)("h1",{id:"user-agent-grant"},"User-Agent Grant"),(0,o.mdx)("p",null,"For use with mobile apps - when someone else will use the application and you want them to authenticate with their own credentials."),(0,o.mdx)("p",null,(0,o.mdx)("span",{parentName:"p",className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"1280px"}},"\n      ",(0,o.mdx)("span",{parentName:"span",className:"gatsby-resp-image-background-image",style:{paddingBottom:"75.9375%",position:"relative",bottom:"0",left:"0",display:"block",transition:"opacity 0.5s 0.5s",pointerEvents:"none"}}),"\n  ",(0,o.mdx)("picture",{parentName:"span"},"\n          ",(0,o.mdx)("source",{parentName:"picture",srcSet:["/analytics-1.4-apis/static/72f05dd7c23c264e275207083a5b3474/cb523/oauth_flow_implicit.webp 320w","/analytics-1.4-apis/static/72f05dd7c23c264e275207083a5b3474/797b9/oauth_flow_implicit.webp 640w","/analytics-1.4-apis/static/72f05dd7c23c264e275207083a5b3474/4b075/oauth_flow_implicit.webp 1280w","/analytics-1.4-apis/static/72f05dd7c23c264e275207083a5b3474/e1022/oauth_flow_implicit.webp 1555w"],sizes:"(max-width: 1280px) 100vw, 1280px",type:"image/webp"}),"\n          ",(0,o.mdx)("source",{parentName:"picture",srcSet:["/analytics-1.4-apis/static/72f05dd7c23c264e275207083a5b3474/72799/oauth_flow_implicit.png 320w","/analytics-1.4-apis/static/72f05dd7c23c264e275207083a5b3474/6af66/oauth_flow_implicit.png 640w","/analytics-1.4-apis/static/72f05dd7c23c264e275207083a5b3474/21b4d/oauth_flow_implicit.png 1280w","/analytics-1.4-apis/static/72f05dd7c23c264e275207083a5b3474/d777c/oauth_flow_implicit.png 1555w"],sizes:"(max-width: 1280px) 100vw, 1280px",type:"image/png"}),"\n          ",(0,o.mdx)("img",{parentName:"picture",className:"gatsby-resp-image-image",src:"/analytics-1.4-apis/static/72f05dd7c23c264e275207083a5b3474/21b4d/oauth_flow_implicit.png",alt:"oauth flow implicit",title:"oauth flow implicit",loading:"lazy",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",opacity:"0",transition:"opacity 0.5s",color:"inherit",boxShadow:"inset 0px 0px 0px 400px none",top:"0",left:"0"}}),"\n        "),"\n    ")," "),(0,o.mdx)("p",null,"Before you set up your OAuth client, make sure you"),(0,o.mdx)("ul",null,(0,o.mdx)("li",{parentName:"ul"},"Have valid Adobe ID credentials."),(0,o.mdx)("li",{parentName:"ul"},"Have access to the Marketing Cloud")),(0,o.mdx)("h2",{id:"step-1-link-your-analytics-account-to-your-adobe-id"},"Step 1: Link your Analytics account to your Adobe ID."),(0,o.mdx)("p",null,"Refer to ",(0,o.mdx)("a",{parentName:"p",href:"auth_link_account.md#"},"this section"),"."),(0,o.mdx)("h2",{id:"step-2-create-an-application"},"Step 2: Create an Application"),(0,o.mdx)("p",null,"Refer to ",(0,o.mdx)("a",{parentName:"p",href:"auth_register_app.md#"},"this section"),"."),(0,o.mdx)("h2",{id:"step-3-obtain-an-access-token"},"Step 3: Obtain an Access Token."),(0,o.mdx)("ol",null,(0,o.mdx)("li",{parentName:"ol"},"Take the user to ",(0,o.mdx)("a",{parentName:"li",href:"https://marketing.adobe.com/authorize"},"https://marketing.adobe.com/authorize"),"."),(0,o.mdx)("li",{parentName:"ol"},"Have the user enter their credentials."),(0,o.mdx)("li",{parentName:"ol"},"Adobe will redirect back with the access token in the URL.")),(0,o.mdx)("h2",{id:"step-4-authenticate-using-the-access-token"},"Step 4: Authenticate Using the Access Token"),(0,o.mdx)("p",null,"Refer to ",(0,o.mdx)("a",{parentName:"p",href:"auth_tokens.md#"},"this section"),"."),(0,o.mdx)("h2",{id:"step-5-validating-the-token"},"Step 5: Validating the Token"),(0,o.mdx)("p",null,"Unpack the JWT payload and verify that the ",(0,o.mdx)("inlineCode",{parentName:"p"},"sub")," parameter matches your intended client ID:"),(0,o.mdx)("pre",null,(0,o.mdx)("code",{parentName:"pre"},"# Javascript\nvar parts = accessToken.split('.');\nvar payload = parts[1];\nvar base64DecodedPayload = window.atob(payload);\nvar payloadObject = JSON.parse(base64DecodedPayload);\nvar clientId = payloadObject.sub; // validate this is your client ID!\n")),(0,o.mdx)("p",null,"Failure to verify tokens makes your application more vulnerable to the ",(0,o.mdx)("a",{parentName:"p",href:"http://en.wikipedia.org/wiki/Confused_deputy_problem"},"Confused Deputy")," problem."),(0,o.mdx)("p",null,(0,o.mdx)("strong",{parentName:"p"},"Parent topic:")," ",(0,o.mdx)("a",{parentName:"p",href:"auth_obtain_access_token.md"},"Obtain an Access Token")))}r.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-guides-authentication-auth-user-agent-md-7a93bfa5e1389e66c0e5.js.map