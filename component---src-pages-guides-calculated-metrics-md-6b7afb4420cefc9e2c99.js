(self.webpackChunkdev_site_documentation_template=self.webpackChunkdev_site_documentation_template||[]).push([[4995],{94140:function(e,n,t){"use strict";t.r(n),t.d(n,{_frontmatter:function(){return d},default:function(){return c}});var a,i=t(22122),r=t(19756),o=(t(15007),t(64983)),m=t(99536),s=["components"],d={},l=(a="CodeBlock",function(e){return console.warn("Component "+a+" was not imported, exported, or provided by MDXProvider as global scope"),(0,o.mdx)("div",e)}),p={_frontmatter:d},u=m.Z;function c(e){var n=e.components,t=(0,r.Z)(e,s);return(0,o.mdx)(u,(0,i.Z)({},p,t,{components:n,mdxType:"MDXLayout"}),(0,o.mdx)("h1",{id:"14-calculated-metrics-api"},"1.4 Calculated Metrics API"),(0,o.mdx)("p",null,"Create, edit, or delete calculated metrics."),(0,o.mdx)("h2",{id:"get"},"Get"),(0,o.mdx)("p",null,(0,o.mdx)("inlineCode",{parentName:"p"},"POST https://api.omniture.com/admin/1.4/rest/?method=CalculatedMetrics.Get")),(0,o.mdx)(l,{slots:"heading, code",repeat:"2",languages:"JSON,JSON",mdxType:"CodeBlock"}),(0,o.mdx)("h4",{id:"request"},"Request"),(0,o.mdx)("pre",null,(0,o.mdx)("code",{parentName:"pre",className:"language-json"},'{\n  "accessLevel":"(string)",\n  "fields":[\n    "(string)"\n  ],\n  "filters":{\n    "name":"(string)",\n    "tags":"(string)",\n    "owner":"(string)",\n    "reportSuiteID":"(string)",\n    "approved":"(boolean)",\n    "favorite":"(boolean)"\n  },\n  "selected":[\n    "(string)"\n  ],\n  "sort":"(string)"\n}\n')),(0,o.mdx)("h4",{id:"response"},"Response"),(0,o.mdx)("pre",null,(0,o.mdx)("code",{parentName:"pre",className:"language-json"},'{\n  "id":"sample_string_id",\n  "name":"12432",\n  "description":"",\n  "reportSuiteID":"sample_rs_1",\n  "owner":"sample_owner",\n  "polarity":"positive",\n  "precision":4,\n  "type":"decimal",\n  "definition":{\n    "metric":"visits"\n  },\n  "tags":[\n      \n  ],\n  "shares":[\n    {\n      "type":"organization",\n      "name":"all"\n    }\n  ],\n  "modified":"YYYY-06-12 09:13:04"\n},\n')),(0,o.mdx)("h2",{id:"delete"},"Delete"),(0,o.mdx)("p",null,(0,o.mdx)("inlineCode",{parentName:"p"},"POST https://api.omniture.com/admin/1.4/rest/?method=CalculatedMetrics.Delete")),(0,o.mdx)(l,{slots:"heading, code",repeat:"2",languages:"JSON,JSON",mdxType:"CodeBlock"}),(0,o.mdx)("h4",{id:"request-1"},"Request"),(0,o.mdx)("pre",null,(0,o.mdx)("code",{parentName:"pre",className:"language-json"},'{\n    "calculatedMetricID":"(string)"\n}\n')),(0,o.mdx)("h4",{id:"response-1"},"Response"),(0,o.mdx)("pre",null,(0,o.mdx)("code",{parentName:"pre",className:"language-json"},'{\n  "true"\n}\n')),(0,o.mdx)("h2",{id:"getfunctions"},"GetFunctions"),(0,o.mdx)("p",null,"Does not require a JSON request body. Response is an array of calculated metric functions."),(0,o.mdx)("p",null,(0,o.mdx)("inlineCode",{parentName:"p"},"POST https://api.omniture.com/admin/1.4/rest/?method=CalculatedMetrics.GetFunctions")),(0,o.mdx)(l,{slots:"heading, code",repeat:"1",languages:"JSON",mdxType:"CodeBlock"}),(0,o.mdx)("h4",{id:"response-2"},"Response"),(0,o.mdx)("pre",null,(0,o.mdx)("code",{parentName:"pre",className:"language-json"},'{\n  "id":"pow",\n  "name":"Power operator",\n  "description":"Returns x raised to the y power",\n  "required":[\n    "column1",\n    "column2"\n  ],\n  "optional":[]\n},\n{\n  "id":"ls-intercept-quadratic",\n  "name":"Quadratic regression: Intercept",\n  "description":"Quadratic regression: Y = ( a + b X ) ^ 2, Returns a.",\n  "required":[\n    "x",\n    "y"\n  ],\n  "optional":[\n    "include-zeros"\n  ]\n}\n')),(0,o.mdx)("ul",null,(0,o.mdx)("li",{parentName:"ul"},(0,o.mdx)("inlineCode",{parentName:"li"},'"required"'),": The parameters that are required to use the function in a calc metric definition and the order they must be in"),(0,o.mdx)("li",{parentName:"ul"},(0,o.mdx)("inlineCode",{parentName:"li"},'"optional"'),": Additional parameters that can be left out, but must still be included in the order shown")),(0,o.mdx)("h2",{id:"save"},"Save"),(0,o.mdx)("p",null,(0,o.mdx)("inlineCode",{parentName:"p"},"POST https://api.omniture.com/admin/1.4/rest/?method=CalculatedMetrics.Save")),(0,o.mdx)(l,{slots:"heading, code",repeat:"2",languages:"JSON,JSON",mdxType:"CodeBlock"}),(0,o.mdx)("h4",{id:"request-2"},"Request"),(0,o.mdx)("pre",null,(0,o.mdx)("code",{parentName:"pre",className:"language-json"},'{\n    "definition":{},\n    "description":"(string)",\n    "favorite":"(boolean)",\n    "id":"(string)",\n    "name":"(string)",\n    "owner":"(string)",\n    "polarity":"(string)",\n    "precision":"(int)",\n    "reportSuiteID":"(string)",\n    "shares":[\n        {\n            "type":"(string)",\n            "name":"(string)"\n        }\n    ],\n    "tags":[\n        "(string)"\n    ],\n    "type":"(string)"\n}\n')),(0,o.mdx)("h4",{id:"response-3"},"Response"),(0,o.mdx)("pre",null,(0,o.mdx)("code",{parentName:"pre",className:"language-json"},'{\n    "calculatedMetricID":"(string)"\n}\n')),(0,o.mdx)("ul",null,(0,o.mdx)("li",{parentName:"ul"},(0,o.mdx)("strong",{parentName:"li"},(0,o.mdx)("inlineCode",{parentName:"strong"},'"id"')),": required for update, must be left out to create a new calc metric"),(0,o.mdx)("li",{parentName:"ul"},(0,o.mdx)("strong",{parentName:"li"},(0,o.mdx)("inlineCode",{parentName:"strong"},'"definition"')),": required for creating, also required when updating the reportSuiteID"),(0,o.mdx)("li",{parentName:"ul"},(0,o.mdx)("strong",{parentName:"li"},(0,o.mdx)("inlineCode",{parentName:"strong"},'"reportSuiteID"')),": required for creating, also required when updating the definition"),(0,o.mdx)("li",{parentName:"ul"},(0,o.mdx)("strong",{parentName:"li"},(0,o.mdx)("inlineCode",{parentName:"strong"},'"name"')),": required for creating"),(0,o.mdx)("li",{parentName:"ul"},(0,o.mdx)("strong",{parentName:"li"},(0,o.mdx)("inlineCode",{parentName:"strong"},'"polarity"')),': optional, one of "positive", "negative", defaults to "positive"'),(0,o.mdx)("li",{parentName:"ul"},(0,o.mdx)("strong",{parentName:"li"},(0,o.mdx)("inlineCode",{parentName:"strong"},'"type"')),': optional, one of "number", "date", "currency", "percent", defaults to "number"'),(0,o.mdx)("li",{parentName:"ul"},(0,o.mdx)("strong",{parentName:"li"},(0,o.mdx)("inlineCode",{parentName:"strong"},'"precision"')),": optional, an integer between 0 and 10, defaults to 0")),(0,o.mdx)("p",null,"Definition:"),(0,o.mdx)("p",null,"May be any nested combination of the following. To see all the possible functions, call ",(0,o.mdx)("inlineCode",{parentName:"p"},"CalculatedMetrics.GetFunctions")),(0,o.mdx)("ul",null,(0,o.mdx)("li",{parentName:"ul"},(0,o.mdx)("strong",{parentName:"li"},(0,o.mdx)("inlineCode",{parentName:"strong"},'"calculatedMetric"')),': this is a wrapper around any piece of the calculated metric definition. The only reason to use this wrapper is to apply "segments" to all pieces inside the wrapper.'),(0,o.mdx)("li",{parentName:"ul"},(0,o.mdx)("strong",{parentName:"li"},(0,o.mdx)("inlineCode",{parentName:"strong"},'"function"')),': specify a function to process. must be used with "parameters" which is a list of calculated metric pieces to use as parameters to the function'),(0,o.mdx)("li",{parentName:"ul"},(0,o.mdx)("strong",{parentName:"li"},(0,o.mdx)("inlineCode",{parentName:"strong"},'"metric"')),': specify a metric to be used in a calculation. may be used with "allocation" and "segments"'),(0,o.mdx)("li",{parentName:"ul"},(0,o.mdx)("strong",{parentName:"li"},(0,o.mdx)("inlineCode",{parentName:"strong"},'"number"')),": specify a value to be used in a calculation"),(0,o.mdx)("li",{parentName:"ul"},(0,o.mdx)("strong",{parentName:"li"},(0,o.mdx)("inlineCode",{parentName:"strong"},'"boolean"')),': specify true or false, only used by a select few functions that have the parameter "ascending-sort" or "include-zeros"')),(0,o.mdx)("p",null,"Basic definition examples:"),(0,o.mdx)("pre",null,(0,o.mdx)("code",{parentName:"pre",className:"language-json"},'"definition": {\n  "number": 100\n}\n')),(0,o.mdx)("pre",null,(0,o.mdx)("code",{parentName:"pre",className:"language-json"},'"definition": {\n  "metric": "pageviews"\n}\n')),(0,o.mdx)("pre",null,(0,o.mdx)("code",{parentName:"pre",className:"language-json"},'"definition": {\n  "metric": "revenue",\n  "allocation": "linear"\n}\n')),(0,o.mdx)("pre",null,(0,o.mdx)("code",{parentName:"pre",className:"language-json"},'"definition": {\n  "metric": "revenue",\n  "allocation": "linear",\n  "segments": [\n    "[segment ID]"\n  ]\n}\n')),(0,o.mdx)("pre",null,(0,o.mdx)("code",{parentName:"pre",className:"language-json"},'"definition": {\n  "function": "divide",\n  "parameters": [\n    {\n      "metric": "revenue",\n      "allocation": "linear"\n    },\n    {\n      "number": 100\n    }\n  ]\n}\n')),(0,o.mdx)("p",null,"Advanced definition examples:"),(0,o.mdx)("pre",null,(0,o.mdx)("code",{parentName:"pre",className:"language-json"},'"definition": {\n  "function": "if",\n  "parameters": [\n    {\n      "function": "gt",\n      "parameters": [\n        {\n          "metric": "pageviews"\n        },\n        {\n          "number": 1000\n        }\n      ]\n    },\n    {\n      "metric": "pageviews"\n    },\n    {\n      "number": 1000\n    }\n  ]\n}\n')),(0,o.mdx)("pre",null,(0,o.mdx)("code",{parentName:"pre",className:"language-json"},'"definition": {\n  "function": "negate",\n  "parameters": [\n    {\n      "function": "modulo",\n      "parameters": [\n        {\n          "metric": "pageviews"\n        },\n        {\n          "function": "abs",\n          "parameters": [\n            {\n              "function": "ceil",\n              "parameters": [\n                {\n                  "function": "tan",\n                  "parameters": [\n                    {\n                      "function": "lt",\n                      "parameters": [\n                        {\n                          "metric": "pageviews"\n                        },\n                        {\n                          "number": 1000\n                        }\n                      ]\n                    }\n                  ]\n                }\n              ]\n            }\n          ]\n        }\n      ]\n    }\n  ]\n}\n')),(0,o.mdx)("pre",null,(0,o.mdx)("code",{parentName:"pre",className:"language-json"},'"definition": {\n  "function": "row-max",\n  "parameters": [\n    {\n      "columns": [\n        {\n          "function": "row-sum",\n          "parameters": [\n            {\n              "columns": [\n                {\n                  "metric": "pageviews"\n                },\n                {\n                  "number": 1000\n                }\n              ]\n            }\n          ]\n        },\n        {\n          "metric": "pageviews"\n        },\n        {\n          "number": 1000\n        }\n      ]\n    },\n    {\n      "boolean": true\n    }\n  ]\n}\n')))}c.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-guides-calculated-metrics-md-6b7afb4420cefc9e2c99.js.map