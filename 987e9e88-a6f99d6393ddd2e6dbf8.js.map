{"version":3,"file":"987e9e88-a6f99d6393ddd2e6dbf8.js","mappings":"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","sources":["webpack://analytics-1.4-apis/./node_modules/@adobe/gatsby-theme-aio/src/components/GetCredential/CredentialForm.js"],"sourcesContent":["import React, { useContext, useEffect, useState } from 'react';\r\nimport { css } from '@emotion/react';\r\nimport classNames from 'classnames';\r\nimport '@spectrum-css/contextualhelp/dist/index-vars.css';\r\nimport { Toast } from '../Toast';\r\nimport { handleAllowedDomainsValidation, MAX_TABLET_SCREEN_WIDTH, MIN_MOBILE_WIDTH } from './FormFields';\r\nimport { SideComponent } from './SideComponent';\r\nimport { CredentialName } from './Form/CredentialName';\r\nimport { AllowedOrigins } from './Form/AllowedOrigins';\r\nimport { Downloads } from './Form/Downloads';\r\nimport { Download } from './Form/Download';\r\nimport { SideContent } from './Form/SideContent';\r\nimport { AdobeDeveloperConsole } from './Form/AdobeDeveloperConsole';\r\nimport { CreateCredential } from './Form/CreateCredential';\r\nimport { MyCredential } from './MyCredential';\r\nimport { Loading } from './Loading';\r\nimport { IllustratedMessage } from './IllustratedMessage';\r\nimport { Product, Products } from './Products';\r\nimport { Organization } from './Organization';\r\nimport GetCredentialContext from './GetCredentialContext';\r\n\r\nconst credentialNameRegex = /^(?=[A-Za-z0-9\\s]{6,}$)[A-Za-z0-9\\s]*$/;\r\n\r\nconst CredentialForm = ({\r\n  showCreateForm,\r\n  setShowCreateForm,\r\n  isCreateNewCredential,\r\n  setIsCreateNewCredential,\r\n  setIsPrevious,\r\n  formData,\r\n  setFormData\r\n}) => {\r\n  const { getCredentialData } = useContext(GetCredentialContext);\r\n  const formProps = getCredentialData;\r\n\r\n  const [loading, setLoading] = useState(false);\r\n  const [isError, setIsError] = useState(false);\r\n  const [response, setResponse] = useState({});\r\n  const [errResp, setErrorResp] = useState('');\r\n  const [showCredential, setShowCredential] = useState(false);\r\n  const [formField, setFormField] = useState([]);\r\n  const [isValid, setIsValid] = useState(false);\r\n  const [isMyCredential, setIsMyCredential] = useState(false);\r\n  const [isShow, setIsShow] = useState(false);\r\n  const [alertShow, setAlertShow] = useState(false);\r\n\r\n  const [isAllowedOriginsValid, setIsAllowedOriginsValid] = useState();\r\n\r\n  const { selectedOrganization, template, previousProjectDetail } = useContext(GetCredentialContext);\r\n\r\n  const credentialForm = formProps?.[CredentialForm];\r\n  const isFormValue = credentialForm?.children?.filter(data =>\r\n    Object.keys(data.props).some(key => key.startsWith('contextHelp'))\r\n  );\r\n\r\n  const initialLoad = () => {\r\n    const fields = {};\r\n    const downloadObj = { label: 'Language', selectOptions: [] };\r\n    const productsObj = { label: 'products', productList: [] };\r\n\r\n    credentialForm?.children.forEach(({ type, props }) => {\r\n      if (type === Downloads && props?.children) {\r\n        downloadObj.required = props.required || false;\r\n        downloadObj.selectOptions.push(\r\n          ...[].concat(props.children).map(({ props: { title, href } }) => ({ title, href }))\r\n        );\r\n        setFormData(prevData => ({\r\n          ...prevData,\r\n          ...(Array.isArray(props.children) ? null : { Download: props.children?.props?.title }),\r\n        }));\r\n      }\r\n      if (type === Products && props?.children) {\r\n        productsObj.productList.push(\r\n          ...[].concat(props.children).map(({ props: { label, icon } }) => ({ label, icon }))\r\n        );\r\n      }\r\n      fields[type] = { ...props, required: type === CredentialName || props?.required };\r\n    });\r\n\r\n    if (downloadObj.selectOptions.length) {\r\n      fields[Download] = downloadObj;\r\n      if (downloadObj.selectOptions.length === 1) {\r\n        setFormData(prevData => ({\r\n          ...prevData,\r\n          Download: downloadObj.selectOptions[0]?.title,\r\n          zipUrl: downloadObj.selectOptions[0]?.href,\r\n        }));\r\n      }\r\n    }\r\n    if (productsObj?.productList.length) {\r\n      fields[Product] = productsObj;\r\n    }\r\n\r\n    const isCredential = previousProjectDetail?.count ? true : false;\r\n    if (isCredential) {\r\n      setIsMyCredential(true);\r\n    } else {\r\n      setIsMyCredential(false);\r\n    }\r\n\r\n    setFormField(fields);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (window.adobeIMS?.isSignedInUser()) {\r\n      setTimeout(() => {\r\n        setLoading(false);\r\n      }, 1000);\r\n    } else {\r\n      setLoading(true);\r\n    }\r\n  }, [window.adobeIMS?.isSignedInUser()]);\r\n\r\n  useEffect(() => {\r\n    if (showCreateForm) setIsError(false);\r\n  }, [showCreateForm]);\r\n\r\n\r\n  useEffect(() => {\r\n    initialLoad();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const isValidCredentialName = credentialNameRegex.test(formData.CredentialName);\r\n\r\n    const isCheckAllowedOrgins = credentialForm.children.some((child) => {\r\n      return child.type === AllowedOrigins;\r\n    })\r\n    let isAllowedOriginsValid;\r\n    if (isCheckAllowedOrgins) {\r\n      if (formData['AllowedOrigins']) {\r\n        isAllowedOriginsValid = handleAllowedDomainsValidation(formData['AllowedOrigins'])\r\n      }\r\n    }\r\n    else {\r\n      isAllowedOriginsValid = true;\r\n    }\r\n    setIsAllowedOriginsValid(isAllowedOriginsValid)\r\n\r\n    const isValid = isValidCredentialName && (!isCheckAllowedOrgins || isAllowedOriginsValid) && formData.Agree === true;\r\n    setIsValid(isValid);\r\n  }, [formData]);\r\n\r\n  const handleChange = (e, type) => {\r\n    let value;\r\n    if (type === 'Download') {\r\n      value = e.title;\r\n    }\r\n    else {\r\n      value = type === 'Downloads' || type === 'Agree' ? e.target.checked : e.target.value;\r\n    }\r\n\r\n    setFormData(prevData => ({ ...prevData, [type]: value }));\r\n    if (type === 'Downloads') {\r\n      handleChange(download?.selectOptions[0], 'Download')\r\n    }\r\n\r\n    if (type === 'Download') {\r\n      const selectedData = formField?.[Download]?.selectOptions.find(\r\n        data => data.title === value\r\n      );\r\n      selectedData && setFormData(prevData => ({ ...prevData, zipUrl: selectedData.href }));\r\n    }\r\n  };\r\n\r\n  const handleErrors = (detailedMessage) => {\r\n    setLoading(false);\r\n    setAlertShow(true);\r\n    setIsValid(false);\r\n    setErrorResp(detailedMessage);\r\n    setShowCreateForm(true);\r\n    setIsError(true);\r\n  }\r\n\r\n  const createCredential = async () => {\r\n    const token = window.adobeIMS?.getTokenFromStorage()?.token;\r\n\r\n    if (!token) {\r\n      console.log('User not logged in');\r\n    }\r\n\r\n    setLoading(true);\r\n    setShowCreateForm(false);\r\n\r\n    const apis = template.apis.map(api => ({\r\n      code: api.code,\r\n      credentialType: api.credentialType,\r\n      flowType: api.flowType,\r\n      licenseConfigs:\r\n        Array.isArray(api.licenseConfigs) && api.licenseConfigs.length > 0\r\n          ? [{ ...api.licenseConfigs[0], op: 'add' }]\r\n          : [],\r\n    }));\r\n\r\n    const data = {\r\n      projectName: formData['CredentialName'],\r\n      description: 'created for get credential',\r\n      metadata: {\r\n        domain: formData['AllowedOrigins'],\r\n      },\r\n      orgId: selectedOrganization.code,\r\n      apis,\r\n    };\r\n\r\n    try {\r\n      const url = `/templates/install/${template.id}`;\r\n      const response = await fetch(url, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          Authorization: `Bearer ${token}`,\r\n          'x-api-key': window?.adobeIMS?.adobeIdData?.client_id,\r\n          Accept: 'application/json',\r\n        },\r\n        body: JSON.stringify(data),\r\n      });\r\n\r\n      const resResp = await response?.json();\r\n\r\n      if (response.ok) {\r\n        setResponse(resResp);\r\n        setShowCredential(true);\r\n        setAlertShow(true);\r\n        setLoading(false);\r\n      } else {\r\n        const jsonString = resResp.errors[0].message.match(/\\((\\{.*\\})\\)/)[1];\r\n        const errorDetails = JSON.parse(jsonString);\r\n        handleErrors(errorDetails.messages[0].message)\r\n      }\r\n    } catch (error) {\r\n      setShowCreateForm(true);\r\n      setLoading(false);\r\n      setAlertShow(true);\r\n      setErrorResp(error.message);\r\n      setIsError(true);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (isMyCredential) {\r\n      setIsPrevious(true);\r\n      setShowCreateForm(true);\r\n    }\r\n  }, [isMyCredential]);\r\n\r\n  const sideObject = formField?.[SideComponent];\r\n  const credentialName = formField?.[CredentialName];\r\n  const allowedOrigins = formField?.[AllowedOrigins];\r\n  const downloads = formField?.[Downloads];\r\n  const download = formField?.[Download];\r\n  const products = formField?.[Products];\r\n  const product = formField?.[Product];\r\n  const adobeDeveloperConsole = formField?.[AdobeDeveloperConsole];\r\n\r\n  const handleRestart = () => {\r\n    setShowCreateForm(true);\r\n    setShowCredential(false);\r\n    setIsCreateNewCredential(true);\r\n    setIsMyCredential(true);\r\n    setFormData({});\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {showCreateForm && !loading && (\r\n        <div\r\n          className={classNames(credentialForm?.className)}\r\n          css={css`\r\n            display: flex;\r\n            flex-direction: column;\r\n            gap: 48px;\r\n          `}\r\n          data-cy=\"credential-form\"\r\n          >\r\n          <div\r\n            css={css`\r\n              display: flex;\r\n              flex-direction: column;\r\n              gap: 48px;\r\n              color: var(--spectrum-global-color-gray-800);\r\n              width: 100%;\r\n              height: 100%;\r\n              text-align: left;\r\n              @media screen and (min-width: ${MIN_MOBILE_WIDTH}) and (max-width: ${MAX_TABLET_SCREEN_WIDTH}) {\r\n                padding: 0;\r\n                width: 100%;\r\n              }\r\n            `}>\r\n            <div\r\n              css={css`\r\n                display: flex;\r\n                flex-direction: column;\r\n                gap: 16px;\r\n              `}>\r\n              {credentialForm?.title && (\r\n                <h3 className=\"spectrum-Heading spectrum-Heading--sizeL\">\r\n                  {credentialForm?.title}\r\n                </h3>\r\n              )}\r\n              {credentialForm?.paragraph && (\r\n                <p className=\"spectrum-Body spectrum-Body--sizeL\">{credentialForm?.paragraph}</p>\r\n              )}\r\n              <p\r\n                className=\"spectrum-Body spectrum-Body--sizeS\"\r\n                css={css`\r\n                  color: var(--spectrum-global-color-gray-800);\r\n                  display: inline-flex;\r\n                `}\r\n                onClick={() => setIsShow(true)}>\r\n                {selectedOrganization.type === \"developer\" ?\r\n                  \"You're creating this credential in your personal developer organization\" :\r\n                  <>You're creating this credential in [<b>{selectedOrganization?.name}</b>].</>}\r\n                <Organization isShow={isShow} setIsShow={setIsShow} />\r\n              </p>\r\n            </div>\r\n          </div>\r\n          <div\r\n            css={css`\r\n              display: flex;\r\n              gap: 35px;\r\n\r\n              @media screen and (min-width: ${MIN_MOBILE_WIDTH}) and (max-width: ${MAX_TABLET_SCREEN_WIDTH}) {\r\n                flex-direction: column;\r\n                padding-left: 0;\r\n              }\r\n            `}>\r\n            <div\r\n              css={css`\r\n                display: flex;\r\n                flex-direction: column;\r\n                gap: 35px;\r\n                width: 50%;\r\n\r\n                @media screen and (min-width: ${MIN_MOBILE_WIDTH}) and (max-width: ${MAX_TABLET_SCREEN_WIDTH}) {\r\n                  width: 100%;\r\n                }\r\n              `}>\r\n              <div\r\n                css={css`\r\n                  display: flex;\r\n                  gap: 32px;\r\n                  width: 100%;\r\n                  flex-direction: column;\r\n                `}>\r\n                {credentialName && (\r\n                  <CredentialName\r\n                    nameProps={credentialName}\r\n                    isFormValue={isFormValue}\r\n                    formData={formData}\r\n                    handleChange={handleChange}\r\n                  />\r\n                )}\r\n                {allowedOrigins && (\r\n                  <AllowedOrigins\r\n                    originsProps={allowedOrigins}\r\n                    isFormValue={isFormValue}\r\n                    formData={formData}\r\n                    handleChange={handleChange}\r\n                    isAllowedOriginsValid={isAllowedOriginsValid}\r\n                  />\r\n                )}\r\n                {downloads && download && (\r\n                  <Downloads\r\n                    downloadsProp={downloads}\r\n                    type=\"Downloads\"\r\n                    formData={formData}\r\n                    handleChange={handleChange}\r\n                  />\r\n                )}\r\n                {formData['Downloads'] && download && (\r\n                  <Download\r\n                    downloadProp={download}\r\n                    isFormValue={isFormValue}\r\n                    handleChange={handleChange}\r\n                  />\r\n                )}\r\n                <Products products={products} product={product} />\r\n                {adobeDeveloperConsole && (\r\n                  <AdobeDeveloperConsole\r\n                    formData={formData}\r\n                    adobeDeveloperConsole={adobeDeveloperConsole}\r\n                    handleChange={handleChange}\r\n                  />\r\n                )}\r\n                <CreateCredential\r\n                  createCredential={createCredential}\r\n                  isValid={isValid}\r\n                  setIsCreateNewCredential={setIsCreateNewCredential}\r\n                  isCreateNewCredential={isCreateNewCredential}\r\n                />\r\n              </div>\r\n            </div>\r\n            {sideObject ? (\r\n              <SideContent sideContent={sideObject?.children} SideComp={SideComponent} />\r\n            ) : null}\r\n          </div>\r\n        </div>\r\n      )}\r\n      {alertShow && (\r\n        <>\r\n          {\r\n            <Toast\r\n              customDisableFunction={setAlertShow}\r\n              message={\r\n                showCreateForm && !showCredential\r\n                  ? errResp\r\n                  : !isError && showCredential && `Your credentials were created successfully.`\r\n              }\r\n              variant={isError || (showCreateForm && !showCredential) ? 'error' : 'success'}\r\n              disable={5000}\r\n            />\r\n          }\r\n        </>\r\n      )}\r\n      {loading && !showCredential && !isError && !showCreateForm && (\r\n        <Loading\r\n          credentials={credentialForm}\r\n          isCreateCredential\r\n          downloadStatus={formData['Downloads']}\r\n        />\r\n      )}\r\n      {isError && !showCreateForm && !showCredential && (\r\n        <IllustratedMessage errorMessage={formProps?.[IllustratedMessage]} />\r\n      )}\r\n      {showCredential && !showCreateForm && (\r\n        <MyCredential\r\n          response={response}\r\n          formData={formData}\r\n          handleRestart={handleRestart}\r\n        />\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport { CredentialForm };\r\n"],"names":["credentialNameRegex","CredentialForm","showCreateForm","setShowCreateForm","isCreateNewCredential","setIsCreateNewCredential","setIsPrevious","formData","setFormData","formProps","useContext","GetCredentialContext","getCredentialData","useState","loading","setLoading","isError","setIsError","response","setResponse","errResp","setErrorResp","showCredential","setShowCredential","formField","setFormField","isValid","setIsValid","isMyCredential","setIsMyCredential","isShow","setIsShow","alertShow","setAlertShow","isAllowedOriginsValid","setIsAllowedOriginsValid","selectedOrganization","template","previousProjectDetail","credentialForm","isFormValue","children","filter","data","Object","keys","props","some","key","startsWith","useEffect","window","adobeIMS","isSignedInUser","setTimeout","fields","downloadObj","label","selectOptions","productsObj","productList","forEach","type","Downloads","required","push","concat","map","title","href","prevData","Array","isArray","Download","Products","icon","CredentialName","length","zipUrl","Product","isCredential","count","initialLoad","isValidCredentialName","test","isCheckAllowedOrgins","child","AllowedOrigins","handleAllowedDomainsValidation","Agree","handleChange","e","value","target","checked","download","selectedData","find","createCredential","token","getTokenFromStorage","console","log","apis","api","code","credentialType","flowType","licenseConfigs","op","projectName","description","metadata","domain","orgId","url","id","fetch","method","headers","Authorization","adobeIdData","client_id","Accept","body","JSON","stringify","json","resResp","ok","jsonString","errors","message","match","errorDetails","parse","detailedMessage","messages","sideObject","SideComponent","credentialName","allowedOrigins","downloads","products","product","adobeDeveloperConsole","AdobeDeveloperConsole","className","classNames","css","MIN_MOBILE_WIDTH","MAX_TABLET_SCREEN_WIDTH","paragraph","onClick","name","nameProps","originsProps","downloadsProp","downloadProp","sideContent","SideComp","customDisableFunction","variant","disable","credentials","isCreateCredential","downloadStatus","I","errorMessage","IllustratedMessage","handleRestart"],"sourceRoot":""}