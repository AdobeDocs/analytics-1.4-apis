"use strict";(self.webpackChunkanalytics_1_4_apis=self.webpackChunkanalytics_1_4_apis||[]).push([[1233],{65480:function(e,a,n){n.d(a,{Z:function(){return I}});var t=n(15861),s=n(42982),r=n(64687),l=n.n(r),o=n(15007),i=n(95223),c=n(75900),d=n.n(c),p=n(62802),u=n.n(p),m=n(95083),v=n.n(m),g=n(32956),f=n(68457),y=n(53971),w=n(78980),h=n(52078),x=n(24808),b=n(48788),C=n(23766),k=n(47549),Z=n(65034),N=n(11490);var D={name:"1a50hjl",styles:"border:none;padding:0;font-family:'adobe-clean';background:transparent;color:var(--spectrum-global-color-gray-800);text-decoration:underline;cursor:pointer;&:hover{color:var(--spectrum-global-color-gray-900);}"},S={name:"181f1kw",styles:"font-weight:700;color:var(--spectrum-global-color-gray-900)"},z={name:"wwrf8h",styles:"display:flex;flex-direction:column;gap:8px;width:80%"},P={name:"1swkvfk",styles:"padding:0;font-family:'adobe-clean';border:none;background:transparent;margin-left:10px;cursor:pointer;text-decoration:underline;color:rgb(0, 84, 182);&:hover{color:rgb(2, 101, 220);}"},L={name:"1f2v555",styles:"color:var(--spectrum-global-color-gray-900)"},B={name:"1f2v555",styles:"color:var(--spectrum-global-color-gray-900)"},j={name:"ti75j2",styles:"margin:0"},A={name:"a29rn1",styles:"display:flex;text-align:center;align-items:center;gap:10px"},_={name:"181f1kw",styles:"font-weight:700;color:var(--spectrum-global-color-gray-900)"},M={name:"1xg43bt",styles:"display:flex;gap:20px;align-items:baseline"},E={name:"6apepd",styles:"display:flex;flex-direction:column;gap:48px"},I=function e(a){var n,r,c=a.formData,p=a.response,m=a.handleRestart,I=(0,o.useContext)(Z.Z),U=I.getCredentialData,F=I.selectedOrganization,H=U,R=(0,o.useState)(),O=R[0],T=R[1],J=(0,o.useState)(""),G=J[0],W=J[1],X={},q={label:"products",productList:[]};null==H||null===(n=H[e])||void 0===n||n.children.forEach((function(e){var a,n,t=e.type,r=e.props;(X[t]=r,r.children&&t===C._)&&(X[t]=r,null==r||null===(a=r.children)||void 0===a||a.forEach((function(e){var a=e.type,n=e.props;X[a]=n})));t===w.bi&&null!=r&&r.children&&(n=q.productList).push.apply(n,(0,s.Z)([].concat(r.children).map((function(e){var a=e.props;return{label:a.label,icon:a.icon}}))))}));var K=null==q?void 0:q.productList;(0,o.useEffect)((function(){c.Downloads&&V("/console/api/organizations/"+(null==F?void 0:F.id)+"/projects/"+p.projectId+"/workspaces/"+p.workspaceId+"/download",c.Download,c.zipUrl)}),[]);var Q=null==H?void 0:H[e],V=function(){var e=(0,t.Z)(l().mark((function e(a,n,t){var s,r,o,i,c,d,p,m,f,y,w,h,x;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===n&&(n="download"),T(!0),e.prev=2,e.next=5,v().getBinaryContent(t);case 5:return d=e.sent,p=new Uint8Array(d).buffer,m=new(u()),e.next=10,m.loadAsync(p);case 10:return f=null===(s=window.adobeIMS)||void 0===s||null===(r=s.getTokenFromStorage())||void 0===r?void 0:r.token,y={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+f,"x-api-key":null===(o=window)||void 0===o||null===(i=o.adobeIMS)||void 0===i||null===(c=i.adobeIdData)||void 0===c?void 0:c.client_id}},e.next=14,fetch(a,y);case 14:if(200!==(w=e.sent).status){e.next=26;break}return e.next=18,w.json();case 18:return h=e.sent,m.file("credential.json",JSON.stringify(h)),e.next=22,m.generateAsync({type:"blob"});case 22:x=e.sent,(0,g.saveAs)(x,n+".zip"),e.next=27;break;case 26:console.error("Failed to fetch additional data. Response status:",w.status);case 27:e.next=32;break;case 29:e.prev=29,e.t0=e.catch(2),console.error("An error occurred:",e.t0);case 32:return e.prev=32,T(!1),e.finish(32);case 35:case"end":return e.stop()}}),e,null,[[2,29,32,35]])})));return function(a,n,t){return e.apply(this,arguments)}}();return(0,i.tZ)("div",{className:d()(null==Q?void 0:Q.className),css:E},(0,i.tZ)("div",{className:d()(null==Q?void 0:Q.className),css:(0,i.iv)("display:flex;flex-direction:column;gap:16px;color:var(--spectrum-global-color-gray-800);width:100%;height:100%;text-align:left;@media screen and (min-width: ",f.xU,") and (max-width: ",f.Ey,"){padding:0;width:100%;}","")},(0,i.tZ)("div",{css:M},(null==Q?void 0:Q.title)&&(0,i.tZ)("h2",{className:"spectrum-Heading spectrum-Heading--sizeL",css:_},null==Q?void 0:Q.title),O&&(0,i.tZ)("div",{css:A},(0,i.tZ)("div",{className:"spectrum-ProgressCircle spectrum-ProgressCircle--indeterminate spectrum-ProgressCircle--small"},(0,i.tZ)("div",{className:"spectrum-ProgressCircle-track"}),(0,i.tZ)("div",{className:"spectrum-ProgressCircle-fills"},(0,i.tZ)("div",{className:"spectrum-ProgressCircle-fillMask1"},(0,i.tZ)("div",{className:"spectrum-ProgressCircle-fillSubMask1"},(0,i.tZ)("div",{className:"spectrum-ProgressCircle-fill"}))),(0,i.tZ)("div",{className:"spectrum-ProgressCircle-fillMask2"},(0,i.tZ)("div",{className:"spectrum-ProgressCircle-fillSubMask2"},(0,i.tZ)("div",{className:"spectrum-ProgressCircle-fill"}))))),(0,i.tZ)("p",{css:j},"Downloading..."))),c.Downloads&&(null==Q?void 0:Q.paragraph)&&(0,i.tZ)("p",{className:"spectrum-Body spectrum-Body--sizeL",css:B},null==Q?void 0:Q.paragraph),c.Downloads&&(0,i.tZ)("p",{className:"spectrum-Body spectrum-Body--sizeS",css:L},"Download not working?",(0,i.tZ)("button",{css:P,onClick:function(){return V("/console/api/organizations/"+(null==F?void 0:F.id)+"/projects/"+p.projectId+"/workspaces/"+p.workspaceId+"/download",c.Download,c.zipUrl)},"data-cy":"restart-download"},"Restart download"))),(0,i.tZ)("div",{css:(0,i.iv)("display:flex;gap:35px;@media screen and (min-width: ",f.xU,") and (max-width: ",f.Ey,"){flex-direction:column;padding-left:0;}","")},(0,i.tZ)("div",{css:(0,i.iv)("display:flex;flex-direction:column;gap:35px;width:50%;@media screen and (min-width: ",f.xU,") and (max-width: ",f.Ey,"){width:100%;}","")},(0,i.tZ)(N.W,{credentialName:c.CredentialName,productList:K,ProductComponent:w.bi,AccessTokenComponent:x.J,DevConsoleLinkComponent:b.A,ClientDetailsComponent:C._,allowedOriginsDetails:c.AllowedOrigins,organizationName:F,response:p,nextButtonLink:null==Q?void 0:Q.nextStepsHref,nextButtonLabel:null==Q?void 0:Q.nextStepsLabel,devConsoleLink:null==Q?void 0:Q.devConsoleDirection,developerConsoleManage:null==Q?void 0:Q.developerConsoleManage,myCredentialFields:X,collapse:null==Q?void 0:Q.isCollapsable}),(0,i.tZ)("div",{css:z},(0,i.tZ)("h4",{className:"spectrum-Heading spectrum-Heading--sizeXS",css:S},"Need another credential"),(0,i.tZ)("p",{className:"spectrum-Body spectrum-Body--sizeS"},(0,i.tZ)("button",{onClick:m,css:D,"data-cy":"Restart-new-credential"},"Restart and create a new credential")))),null!=Q&&Q.children?(0,i.tZ)(k.c,{sideContent:null===(r=X[h.v])||void 0===r?void 0:r.children,SideComp:h.v}):null),G&&(0,i.tZ)(y.F,{variant:"success",message:"Copied to clipboard",disable:1e3,customDisableFunction:W}))}}}]);
//# sourceMappingURL=862bb76f-af569132ce54d7fdfdb5.js.map