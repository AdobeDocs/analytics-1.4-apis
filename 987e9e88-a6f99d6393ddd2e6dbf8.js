"use strict";(self.webpackChunkanalytics_1_4_apis=self.webpackChunkanalytics_1_4_apis||[]).push([[2914],{77503:function(e,t,n){n.d(t,{S:function(){return E}});var i=n(15861),r=n(4942),l=n(42982),a=n(64687),o=n.n(a),s=n(15007),d=n(95223),c=n(75900),u=n.n(c),p=n(53971),f=n(68457),v=n(52078),m=n(67500),g=n(1895),h=n(34634),w=n(1254),y=n(47549),x=n(43925),O=n(32647),b=n(65480),Z=n(47720),C=n(59273),S=n(78980),D=n(79555),j=n(65034);function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var P=/^(?=[A-Za-z0-9\s]{6,}$)[A-Za-z0-9\s]*$/,A={name:"14s3c4g",styles:"display:flex;gap:32px;width:100%;flex-direction:column"},N={name:"h8f25w",styles:"color:var(--spectrum-global-color-gray-800);display:inline-flex"},F={name:"budh8k",styles:"display:flex;flex-direction:column;gap:16px"},U={name:"6apepd",styles:"display:flex;flex-direction:column;gap:48px"},E=function e(t){var n,r,a=t.showCreateForm,c=t.setShowCreateForm,I=t.isCreateNewCredential,E=t.setIsCreateNewCredential,z=t.setIsPrevious,M=t.formData,T=t.setFormData,_=(0,s.useContext)(j.Z).getCredentialData,L=(0,s.useState)(!1),B=L[0],V=L[1],q=(0,s.useState)(!1),H=q[0],J=q[1],Q=(0,s.useState)({}),Y=Q[0],$=Q[1],R=(0,s.useState)(""),W=R[0],G=R[1],K=(0,s.useState)(!1),X=K[0],ee=K[1],te=(0,s.useState)([]),ne=te[0],ie=te[1],re=(0,s.useState)(!1),le=re[0],ae=re[1],oe=(0,s.useState)(!1),se=oe[0],de=oe[1],ce=(0,s.useState)(!1),ue=ce[0],pe=ce[1],fe=(0,s.useState)(!1),ve=fe[0],me=fe[1],ge=(0,s.useState)(),he=ge[0],we=ge[1],ye=(0,s.useContext)(j.Z),xe=ye.selectedOrganization,Oe=ye.template,be=ye.previousProjectDetail,Ze=null==_?void 0:_[e],Ce=null==Ze||null===(n=Ze.children)||void 0===n?void 0:n.filter((function(e){return Object.keys(e.props).some((function(e){return e.startsWith("contextHelp")}))}));(0,s.useEffect)((function(){var e;null!==(e=window.adobeIMS)&&void 0!==e&&e.isSignedInUser()?setTimeout((function(){V(!1)}),1e3):V(!0)}),[null===(r=window.adobeIMS)||void 0===r?void 0:r.isSignedInUser()]),(0,s.useEffect)((function(){a&&J(!1)}),[a]),(0,s.useEffect)((function(){!function(){var e={},t={label:"Language",selectOptions:[]},n={label:"products",productList:[]};null==Ze||Ze.children.forEach((function(i){var r,a,o=i.type,s=i.props;o===h.i&&null!=s&&s.children&&(t.required=s.required||!1,(r=t.selectOptions).push.apply(r,(0,l.Z)([].concat(s.children).map((function(e){var t=e.props;return{title:t.title,href:t.href}})))),T((function(e){var t,n;return k(k({},e),Array.isArray(s.children)?null:{Download:null===(t=s.children)||void 0===t||null===(n=t.props)||void 0===n?void 0:n.title})}))),o===S.QI&&null!=s&&s.children&&(a=n.productList).push.apply(a,(0,l.Z)([].concat(s.children).map((function(e){var t=e.props;return{label:t.label,icon:t.icon}})))),e[o]=k(k({},s),{},{required:o===m.M||(null==s?void 0:s.required)})})),t.selectOptions.length&&(e[w.U]=t,1===t.selectOptions.length&&T((function(e){var n,i;return k(k({},e),{},{Download:null===(n=t.selectOptions[0])||void 0===n?void 0:n.title,zipUrl:null===(i=t.selectOptions[0])||void 0===i?void 0:i.href})}))),null!=n&&n.productList.length&&(e[S.xs]=n);var i=!(null==be||!be.count);de(!!i),ie(e)}()}),[]),(0,s.useEffect)((function(){var e,t=P.test(M.CredentialName),n=Ze.children.some((function(e){return e.type===g.d}));n?M.AllowedOrigins&&(e=(0,f.Jv)(M.AllowedOrigins)):e=!0,we(e);var i=t&&(!n||e)&&!0===M.Agree;ae(i)}),[M]);var Se=function e(t,n){var i;if(i="Download"===n?t.title:"Downloads"===n||"Agree"===n?t.target.checked:t.target.value,T((function(e){var t;return k(k({},e),{},((t={})[n]=i,t))})),"Downloads"===n&&e(null==Ae?void 0:Ae.selectOptions[0],"Download"),"Download"===n){var r,l=null==ne||null===(r=ne[w.U])||void 0===r?void 0:r.selectOptions.find((function(e){return e.title===i}));l&&T((function(e){return k(k({},e),{},{zipUrl:l.href})}))}},De=function(){var e=(0,i.Z)(o().mark((function e(){var t,n,i,r,l,a,s,d,u,p,f,v,m;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(i=null===(t=window.adobeIMS)||void 0===t||null===(n=t.getTokenFromStorage())||void 0===n?void 0:n.token)||console.log("User not logged in"),V(!0),c(!1),r=Oe.apis.map((function(e){return{code:e.code,credentialType:e.credentialType,flowType:e.flowType,licenseConfigs:Array.isArray(e.licenseConfigs)&&e.licenseConfigs.length>0?[k(k({},e.licenseConfigs[0]),{},{op:"add"})]:[]}})),l={projectName:M.CredentialName,description:"created for get credential",metadata:{domain:M.AllowedOrigins},orgId:xe.code,apis:r},e.prev=6,u="/templates/install/"+Oe.id,e.next=10,fetch(u,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+i,"x-api-key":null===(a=window)||void 0===a||null===(s=a.adobeIMS)||void 0===s||null===(d=s.adobeIdData)||void 0===d?void 0:d.client_id,Accept:"application/json"},body:JSON.stringify(l)});case 10:return p=e.sent,e.next=13,null==p?void 0:p.json();case 13:f=e.sent,p.ok?($(f),ee(!0),me(!0),V(!1)):(v=f.errors[0].message.match(/\((\{.*\})\)/)[1],m=JSON.parse(v),o=m.messages[0].message,V(!1),me(!0),ae(!1),G(o),c(!0),J(!0)),e.next=24;break;case 17:e.prev=17,e.t0=e.catch(6),c(!0),V(!1),me(!0),G(e.t0.message),J(!0);case 24:case"end":return e.stop()}var o}),e,null,[[6,17]])})));return function(){return e.apply(this,arguments)}}();(0,s.useEffect)((function(){se&&(z(!0),c(!0))}),[se]);var je=null==ne?void 0:ne[v.v],Ie=null==ne?void 0:ne[m.M],ke=null==ne?void 0:ne[g.d],Pe=null==ne?void 0:ne[h.i],Ae=null==ne?void 0:ne[w.U],Ne=null==ne?void 0:ne[S.QI],Fe=null==ne?void 0:ne[S.xs],Ue=null==ne?void 0:ne[x.O];return(0,d.tZ)(s.default.Fragment,null,a&&!B&&(0,d.tZ)("div",{className:u()(null==Ze?void 0:Ze.className),css:U,"data-cy":"credential-form"},(0,d.tZ)("div",{css:(0,d.iv)("display:flex;flex-direction:column;gap:48px;color:var(--spectrum-global-color-gray-800);width:100%;height:100%;text-align:left;@media screen and (min-width: ",f.xU,") and (max-width: ",f.Ey,"){padding:0;width:100%;}","")},(0,d.tZ)("div",{css:F},(null==Ze?void 0:Ze.title)&&(0,d.tZ)("h3",{className:"spectrum-Heading spectrum-Heading--sizeL"},null==Ze?void 0:Ze.title),(null==Ze?void 0:Ze.paragraph)&&(0,d.tZ)("p",{className:"spectrum-Body spectrum-Body--sizeL"},null==Ze?void 0:Ze.paragraph),(0,d.tZ)("p",{className:"spectrum-Body spectrum-Body--sizeS",css:N,onClick:function(){return pe(!0)}},"developer"===xe.type?"You're creating this credential in your personal developer organization":(0,d.tZ)(s.default.Fragment,null,"You're creating this credential in [",(0,d.tZ)("b",null,null==xe?void 0:xe.name),"]."),(0,d.tZ)(D.c,{isShow:ue,setIsShow:pe})))),(0,d.tZ)("div",{css:(0,d.iv)("display:flex;gap:35px;@media screen and (min-width: ",f.xU,") and (max-width: ",f.Ey,"){flex-direction:column;padding-left:0;}","")},(0,d.tZ)("div",{css:(0,d.iv)("display:flex;flex-direction:column;gap:35px;width:50%;@media screen and (min-width: ",f.xU,") and (max-width: ",f.Ey,"){width:100%;}","")},(0,d.tZ)("div",{css:A},Ie&&(0,d.tZ)(m.M,{nameProps:Ie,isFormValue:Ce,formData:M,handleChange:Se}),ke&&(0,d.tZ)(g.d,{originsProps:ke,isFormValue:Ce,formData:M,handleChange:Se,isAllowedOriginsValid:he}),Pe&&Ae&&(0,d.tZ)(h.i,{downloadsProp:Pe,type:"Downloads",formData:M,handleChange:Se}),M.Downloads&&Ae&&(0,d.tZ)(w.U,{downloadProp:Ae,isFormValue:Ce,handleChange:Se}),(0,d.tZ)(S.QI,{products:Ne,product:Fe}),Ue&&(0,d.tZ)(x.O,{formData:M,adobeDeveloperConsole:Ue,handleChange:Se}),(0,d.tZ)(O.p,{createCredential:De,isValid:le,setIsCreateNewCredential:E,isCreateNewCredential:I}))),je?(0,d.tZ)(y.c,{sideContent:null==je?void 0:je.children,SideComp:v.v}):null)),ve&&(0,d.tZ)(s.default.Fragment,null,(0,d.tZ)(p.F,{customDisableFunction:me,message:a&&!X?W:!H&&X&&"Your credentials were created successfully.",variant:H||a&&!X?"error":"success",disable:5e3})),B&&!X&&!H&&!a&&(0,d.tZ)(Z.g,{credentials:Ze,isCreateCredential:!0,downloadStatus:M.Downloads}),H&&!a&&!X&&(0,d.tZ)(C.I,{errorMessage:null==_?void 0:_[C.I]}),X&&!a&&(0,d.tZ)(b.Z,{response:Y,formData:M,handleRestart:function(){c(!0),ee(!1),E(!0),de(!0),T({})}}))}}}]);
//# sourceMappingURL=987e9e88-a6f99d6393ddd2e6dbf8.js.map