{"version":3,"sources":["webpack://dev-site-documentation-template/./src/pages/guides/getting-started/c_Import_Bulk_Data.md"],"names":["_frontmatter","layoutProps","MDXLayout","DefaultLayout","MDXContent","components","props","mdxType","parentName","isMDXComponent"],"mappings":"oTAQaA,EAAe,GACtBC,EAAc,CAClBD,gBAEIE,EAAYC,IACH,SAASC,EAAT,GAGX,IAFFC,EAEC,EAFDA,WACGC,GACF,YACD,OAAO,SAACJ,GAAD,UAAeD,EAAiBK,EAAhC,CAAuCD,WAAYA,EAAYE,QAAQ,eAG5E,eACE,GAAM,2BADR,6BAGA,maACA,eACE,GAAM,2DADR,4DAGA,oVACA,oBACE,eAAIC,WAAW,MAAf,oCAAwD,mBAAQA,WAAW,MAAnB,qBAAxD,0FAAwM,mBAAQA,WAAW,MAAnB,2BAAxM,gJAEF,qBAAK,iBAAMA,WAAW,OAAjB,2oBAsBL,qBAAK,iBAAMA,WAAW,OAAjB,iSAWL,qBAAK,iBAAMA,WAAW,OAAjB,yPAUL,4NACA,eACE,GAAM,kDADR,mDAGA,kOAAmN,mBAAQA,WAAW,KAAnB,wBAAnN,mDACA,mBAAG,mBAAQA,WAAW,KAAnB,qCAAH,MACA,sHAAuG,mBAAQA,WAAW,KAAnB,yBAAvG,YAA8K,mBAAQA,WAAW,KAAnB,aAA9K,6DACA,mBAAG,mBAAQA,WAAW,KAAnB,+BAAH,MACA,8GACA,qBAAK,iBAAMA,WAAW,OAAjB,qBAIL,qBAAK,iBAAMA,WAAW,OAAjB,4uCAuCL,qBAAK,iBAAMA,WAAW,OAAjB,qsDA+CL,mBAAG,mBAAQA,WAAW,KAAnB,yDAAH,MACA,+CAAgC,mBAAQA,WAAW,KAAnB,wBAAhC,0SACA,uFACA,oBACE,eAAIA,WAAW,OAAK,mBAAQA,WAAW,MAAnB,mBAApB,oEAA4I,mBAAQA,WAAW,MAAnB,2BAA5I,aACA,eAAIA,WAAW,OAAK,mBAAQA,WAAW,MAAnB,eAApB,2FACA,eAAIA,WAAW,OAAK,mBAAQA,WAAW,MAAnB,QAApB,gDACA,eAAIA,WAAW,OAAK,mBAAQA,WAAW,MAAnB,gBAApB,4DACA,eAAIA,WAAW,OAAK,mBAAQA,WAAW,MAAnB,cAApB,qEAEF,qBAAK,iBAAMA,WAAW,OAAjB,qBAIL,qBAAK,iBAAMA,WAAW,OAAjB,q1CAoCL,qBAAK,iBAAMA,WAAW,OAAjB,g/BAyBL,eACE,GAAM,yDADR,2DAGA,oDAAqC,mBAAQA,WAAW,KAAnB,yBAArC,qJACA,qBAAK,iBAAMA,WAAW,OAAjB,qBAIL,qBAAK,iBAAMA,WAAW,OAAjB,8JAML,qBAAK,iBAAMA,WAAW,OAAjB,mTAWL,mBAAG,mBAAQA,WAAW,KAAnB,iBAAH,KAAyD,cAAGA,WAAW,IACnE,KAAQ,+CAD6C,kCAO7DJ,EAAWK,gBAAiB","file":"component---src-pages-guides-getting-started-c-import-bulk-data-md-9f8313742b10268ccb9e.js","sourcesContent":["import * as React from 'react'\n  /* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\n\nimport DefaultLayout from \"/home/runner/work/analytics-1.4-apis/analytics-1.4-apis/node_modules/@adobe/gatsby-theme-aio/src/components/MDXFilter/index.js\";\nexport const _frontmatter = {};\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout;\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n    <h1 {...{\n      \"id\": \"step-4-import-bulk-data\"\n    }}>{`Step 4: Import Bulk Data`}</h1>\n    <p>{`After the Product Builder script has been created and executed within the Integration Wizard, you can upload the bulk data to the Adobe Online Experience Cloud servers. Remember that the Product Builder script only created the data source, and you must write the Java/PHP/.NET code to actually upload the bulk data. In the steps below, you will learn how to upload the data using the Partner API.`}</p>\n    <h2 {...{\n      \"id\": \"retrieve-all-the-available-integrations-for-the-partner\"\n    }}>{`Retrieve all the available integrations for the partner`}</h2>\n    <p>{`To upload the data, you must first identify one or all of the existing Customer integrations to your data connectors product. In this step, you will loop over all the integrations to upload data. However, since this JJ. Esquire demo application only includes one integration, you will update only the one integration.`}</p>\n    <ol>\n      <li parentName=\"ol\">{`Open the solution file from the `}<strong parentName=\"li\">{`Downloads section`}</strong>{` of this article in your IDE and review the code to retrieve all the integrations. The`}<strong parentName=\"li\">{`Partner.GetIntegrations`}</strong>{` method returns details about all the active data connectors integrations in an array. You loop over the array to access each integration.`}</li>\n    </ol>\n    <pre><code parentName=\"pre\" {...{}}>{`PHP Code\n \n/* Include the common functions to send a SOAP request to data connectors */\nrequire_once \"Data ConnectorsSoapApp.class.php\";\n \n$soapApp = new Data ConnectorsSoapApp();\n \n/* Define the parameters for the GetIntegrations SOAP request */\n$wsdlType = 'integration';  // Use Data Connectors Integration WSDL\n$functionName = 'Partner.GetIntegrations';\n$params = array();\n$debug = 0;\n \n/* Queue the GetIntegrations SOAP request */\n$result = $soapApp->sendRequest($functionName, $params, $wsdlType, $debug);\n \n/* Loop over all the Partner integrations */\nforeach($result as $integration){\n  var_dump($integration);\n}\n\n`}</code></pre>\n    <pre><code parentName=\"pre\" {...{}}>{`Java Code\n \n/* Get all the Partner integrations */\nIntegrationDetail[] integrationDetails = genesisIntegrationWebServicePortType.partnerGetIntegrations(\"\");\n \n/* Loop over all the Partner integrations */\nfor (IntegrationDetail integrationDetail : integrationDetails)\n{\n \n}\n`}</code></pre>\n    <pre><code parentName=\"pre\" {...{}}>{`C# Code\n \nintegrationDetail[] integrationDetails = genesisIntegrationWebServicePortTypeClient.PartnerGetIntegrations(\"\");\n \n   /* Loop over all the Partner integrations */\n  for (int i = 0; i < integrationDetails.Length; i++)\n {\n \n }\n`}</code></pre>\n    <p>{`In the next step, you will create a function to upload all of the bulk data to the data source in the report suite. In Step 3, you will return to this loop to run the function for each integration.`}</p>\n    <h2 {...{\n      \"id\": \"upload-bulk-data-to-the-adobe-experience-cloud\"\n    }}>{`Upload bulk data to the Adobe Experience Cloud`}</h2>\n    <p>{`In this section, you will upload the bulk data to the Adobe Online Experience Cloud. This requires you to use the sample data provided in the solution file, import the data into an array and then use the `}<strong parentName=\"p\">{`Import.UploadMetrics`}</strong>{` Partner API method to upload the actual data.`}</p>\n    <p><strong parentName=\"p\">{`Review the sample data for upload`}</strong>{` `}</p>\n    <p>{`The solution file that you downloaded earlier in the article includes a sample data file called `}<strong parentName=\"p\">{`data`}{`_`}{`upload.txt`}</strong>{` in the `}<strong parentName=\"p\">{`resources`}</strong>{`directory. Open this file and notice the bulk data rows.`}</p>\n    <p><strong parentName=\"p\">{`Import data from local file`}</strong>{` `}</p>\n    <p>{`Create a function that reads in the data from the local file and stores it in an array.`}</p>\n    <pre><code parentName=\"pre\" {...{}}>{`PHP Code\n \n\n`}</code></pre>\n    <pre><code parentName=\"pre\" {...{}}>{`Java Code\n \n    private String[][] getDataSourcesRowsFromReportData()\n    {\n        ArrayList<String[]> dataSourceData = new ArrayList<String[]>();\n        try\n        {\n/* Read in file name */\n \n            String importFile = \"resources/data_upload.txt\";\n \n             /* Create an instance of BufferedReader */\n            BufferedReader input = new BufferedReader(new FileReader(importFile));\n            try\n            {\n                String line;\n                  /* Read in data from file and store it in an array */\n                while ((line = input.readLine()) != null)\n                {\n                    String[] dataSourceLine = new String[line.split(\"\\\\t\").length + 1];\n                    dataSourceLine[0] = \"1/1/2011\";\n                    dataSourceLine[1] = line.split(\"\\\\t\")[0];\n                    dataSourceLine[2] = line.split(\"\\\\t\")[1];\n                    dataSourceData.add(dataSourceLine);\n                }\n            }\n            finally\n            {\n                input.close();\n            }\n        }\n        catch (IOException ex)\n        {\n            ex.printStackTrace();\n        }\n \n        return dataSourceData.toArray(new String[dataSourceData.size()][]); \n    }\n`}</code></pre>\n    <pre><code parentName=\"pre\" {...{}}>{`C# Code\n \npublic static String[][] getDataSourcesRowsFromReportData()\n    {\n        ArrayList dataSourceData = new ArrayList();\n  \n        try\n        {\n            String importFile = Path.Combine(Environment.CurrentDirectory, \"resources\\\\\\\\data_upload.txt\");\n            FileStream fileStream = File.OpenRead(importFile);\n            StreamReader streamReader = new StreamReader(importFile);\n            string line;\n \n            /* Read in all the data from the import data file into an arraylist */\n            while ((line = streamReader.ReadLine()) != null)\n             {\n              \n                    String[] dataSourceLine = new String[line.Split('\\\\t').Length + 1];\n                    dataSourceLine[0] = \"1/1/2011\";\n                    dataSourceLine[1] = line.Split('\\\\t')[0];\n                    dataSourceLine[2] = line.Split('\\\\t')[1];\n                    dataSourceData.AddRange(dataSourceLine);\n                \n             }\n \n             streamReader.Close();\n        }\n       \n        catch (Exception ex)\n        {\n            Console.WriteLine(ex.Message);\n            Console.WriteLine(ex.InnerException);\n        }\n \n        /* Use the ArrayList data to populate the jagged array and return the row data */\n        String[] stringDataSourcesArray = (String[])dataSourceData.ToArray(typeof(string));\n        string[][] rows = new string[dataSourceData.Count / 4][];\n \n        for (int i = 0; i < dataSourceData.Count / 4; i++)\n        {\n            rows[i] = new string[4] { stringDataSourcesArray[i], stringDataSourcesArray[i + 1], stringDataSourcesArray[i + 2], stringDataSourcesArray[i + 3] };\n        }\n \n        return rows;\n       \n    }\n`}</code></pre>\n    <p><strong parentName=\"p\">{`Define parameters for the Import.UploadMetrics method`}</strong>{` `}</p>\n    <p>{`The Partner API uses the `}<strong parentName=\"p\">{`Import.UploadMetrics`}</strong>{` method to import bulk data. This method submits data blocks to the Adobe Experience Cloud. You must first define all the values for the arguments needed by this method. For this JJ. Esquire demo application, you are importing the Twitter handle and follower count of each handle as data rows.`}</p>\n    <p>{`You must first define values for the following method arguments:`}</p>\n    <ul>\n      <li parentName=\"ul\"><strong parentName=\"li\">{`integrationCode`}</strong>{`: The integration identifier. This is the value returned by the `}<strong parentName=\"li\">{`Partner.GetIntegrations`}</strong>{` method.`}</li>\n      <li parentName=\"ul\"><strong parentName=\"li\">{`columnNames`}</strong>{`: The names of the data columns `}{`(`}{`the column headings`}{`)`}{` in the report suite.`}</li>\n      <li parentName=\"ul\"><strong parentName=\"li\">{`rows`}</strong>{`: The data to import into the report suite.`}</li>\n      <li parentName=\"ul\"><strong parentName=\"li\">{`dataSourceId`}</strong>{`: The data source where you want to import the metrics.`}</li>\n      <li parentName=\"ul\"><strong parentName=\"li\">{`endOfBlock`}</strong>{`: Indicates that this is the last block in the data submission.`}</li>\n    </ul>\n    <pre><code parentName=\"pre\" {...{}}>{`PHP Code\n \n\n`}</code></pre>\n    <pre><code parentName=\"pre\" {...{}}>{`Java Code\n \nprivate void uploadBulkTwitterData(Data ConnectorsIntegrationWebServicePortType genesisIntegrationWebServicePortType, IntegrationDetail integrationDetail) throws RemoteException\n    {\n         /* Define local parameters for method arguments */\n        String[] columnNames;\n        String dataSourceId;\n        String endOfBlock;\n        String integrationCode;\n        String[][] rows;\n        IntHolder blockId;\n        IntHolder fileId;\n        StringHolder status;\n \n        /* Retrieve integration code */\n        integrationCode = integrationDetail.getIntegrationCode();\n        dataSourceId = Integer.toString(integrationDetail.getDataSourceIds()[0]);\n \n         /* Define column headers */\n        columnNames = new String[3];\n        columnNames[0] = \"Date\";\n        columnNames[1] = \"twitter_handle\";\n        columnNames[2] = \"twitter_followers\";\n       \n         /* Read data from local file */\n        rows = getDataSourcesRowsFromReportData();\n        endOfBlock = \"1\";\n        blockId = new IntHolder();\n        fileId = new IntHolder();\n        status = new StringHolder();\n \n        /* Call the Partner API method for uploading data*/\n \n        genesisIntegrationWebServicePortType.importUploadMetrics(columnNames, dataSourceId, endOfBlock, integrationCode, rows, blockId, fileId, status);\n    }\n`}</code></pre>\n    <pre><code parentName=\"pre\" {...{}}>{`C# Code\n \n public static void uploadBulkTwitterData(integrationDetail partnerIntegrationDetail, Data ConnectorsIntegrationWebServicePortTypeClient genesisIntegrationWebServicePortTypeClient)\n    {\n        String[] columnNames;\n        String dataSourceId;\n        String endOfBlock;\n        String integrationCode;\n        String[][] rows;\n        int fileId;\n        String status;\n \n        integrationCode = partnerIntegrationDetail.integrationCode;\n        dataSourceId = Convert.ToString(partnerIntegrationDetail.dataSourceIds[0]);\n        columnNames = new String[3];\n        columnNames[0] = \"Date\";\n        columnNames[1] = \"twitter_handle\";\n        columnNames[2] = \"twitter_followers\";\n \n        rows = getDataSourcesRowsFromReportData();\n        endOfBlock = \"1\";\n    \n        /* Upload metrics to Analytics */ genesisIntegrationWebServicePortTypeClient.ImportUploadMetrics(columnNames, dataSourceId, endOfBlock, integrationCode, rows, out fileId, out status);\n    }\n`}</code></pre>\n    <h2 {...{\n      \"id\": \"import-bulk-data-using-the-importuploadmetrics-method\"\n    }}>{`Import bulk data using the Import.UploadMetrics method`}</h2>\n    <p>{`Now that you have created the `}<strong parentName=\"p\">{`uploadBulkTwitterData`}</strong>{` method, you will return to the for loop in Step 1 to invoke the method. This will execute the function to upload the data for each integration.`}</p>\n    <pre><code parentName=\"pre\" {...{}}>{`PHP Code\n \n\n`}</code></pre>\n    <pre><code parentName=\"pre\" {...{}}>{`Java Code\n \n/* Invoke uploadBulkTwitterData method */\nuploadBulkTwitterData(genesisIntegrationWebServicePortType, integrationDetail);\n           }\n`}</code></pre>\n    <pre><code parentName=\"pre\" {...{}}>{`C# Code\n \nfor (int i = 0; i < integrationDetails.Length; i++)\n    {\n/* Invoke uploadBulkTwitterData method */\n       uploadBulkTwitterData(integrationDetails[i], genesisIntegratifor (IntegrationDetail integrationDetail : integrationDetails)\n           {\nonWebServicePortTypeClient);\n \n    }\n`}</code></pre>\n    <p><strong parentName=\"p\">{`Parent topic:`}</strong>{` `}<a parentName=\"p\" {...{\n        \"href\": \"c_Import_bulk_Data_using_the_Partner_API.md\"\n      }}>{`6. Import Bulk Data Tutorial`}</a></p>\n\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n      "],"sourceRoot":""}