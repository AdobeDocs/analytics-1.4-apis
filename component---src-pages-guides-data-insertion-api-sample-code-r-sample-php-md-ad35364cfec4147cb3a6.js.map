{"version":3,"sources":["webpack://dev-site-documentation-template/./src/pages/guides/data-insertion-api/sample_code/r_sample_php.md"],"names":["_frontmatter","layoutProps","MDXLayout","DefaultLayout","MDXContent","components","props","mdxType","parentName","isMDXComponent"],"mappings":"qTAQaA,EAAe,GACtBC,EAAc,CAClBD,gBAEIE,EAAYC,IACH,SAASC,EAAT,GAGX,IAFFC,EAEC,EAFDA,WACGC,GACF,YACD,OAAO,SAACJ,GAAD,UAAeD,EAAiBK,EAAhC,CAAuCD,WAAYA,EAAYE,QAAQ,eAG5E,eACE,GAAM,6BADR,yCAGA,0HACA,qBAAK,iBAAMC,WAAW,OAAjB,ypFAiGL,mBAAG,mBAAQA,WAAW,KAAnB,iBAAH,KAAyD,cAAGA,WAAW,IACnE,KAAQ,mCAD6C,iBAO7DJ,EAAWK,gBAAiB","file":"component---src-pages-guides-data-insertion-api-sample-code-r-sample-php-md-ad35364cfec4147cb3a6.js","sourcesContent":["import * as React from 'react'\n  /* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\n\nimport DefaultLayout from \"/home/runner/work/analytics-1.4-apis/analytics-1.4-apis/node_modules/@adobe/gatsby-theme-aio/src/components/MDXFilter/index.js\";\nexport const _frontmatter = {};\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout;\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n    <h1 {...{\n      \"id\": \"data-insertion-sample-php\"\n    }}>{`Data Insertion Sample `}{`(`}{`PHP`}{`)`}</h1>\n    <p>{`This PHP sample illustrates how to connect to Adobe data collection servers and record a page view.`}</p>\n    <pre><code parentName=\"pre\" {...{}}>{`<?/\n **\n * @file\n * Example code to send one pageview to Omniture via the Data Insertion API\n *   and check for a valid response.\n * \n * @author Omniture, an Adobe Company <clientcare@omniture.com>\n * @copyright 2007-2010 Adobe Systems, Inc. All Rights Reserved.\n */ \n// NOTE: Contact an ClientCare to identify the correct namespace and domain for your company.\n\n$namespace = \"namespace\";\n$domain    = \"sc.omtrdc.net\";\n$host      = $namespace.\".\".$domain;\n$rsid      = \"rsid\";\n$vid       = \"\";\n$ip        = \"10.0.0.1\";\n$page_url  = \"\";\n$pageName  = \"Test Page\"; \n$timestamp = \"2008-10-21T17:33:22-07\";\n\n// create opening XML tags\n$xml  = \"<?xml version=1.0 encoding=UTF-8?>\\\\n\";\n$xml .= \"<request>\\\\n\";\n$xml .= \" <scXmlVer>1.0</scXmlVer>\\\\n\"; \n\n// add tags for required elements\n$xml .= $rsid ? \" <reportSuiteID>$rsid</reportSuiteID>\\\\n\":\"\"; \n\n//The timestamp line of code can only be used when an Omniture representitive has enabled timestamp support for your organization.\n$xml .= $timestamp ? \" <timestamp>$timestamp</timestamp>\\\\n\":\"\";\n\n$xml .= $vid ? \" <visitorID>$vid</visitorID>\\\\n\":\"\";\n$xml .= $ip ? \" <ipAddress>$ip</ipAddress>\\\\n\":\"\"; \n\n$xml .= $page_url ? \" <pageURL>$page_url</pageURL>\\\\n\":\"\";\n$xml .= $pageName ? \" <pageName>$pageName</pageName>\\\\n\":\"\"; \n\n// close the XML request\n$xml .= \"</request>\\\\n\"; \n\n// Create POST, Host and Content-Length headers\n$head = \"POST /b/ss//6 HTTP/1.0\\\\n\";\n$head .= \"Host: $host\\\\n\";\n$head .= \"Content-Length: \".(string)strlen($xml).\"\\\\n\\\\n\"; \n\n// combine the head and XML\n$request = $head.$xml; \n\n$fp=fsockopen($host,80,$errno,$errstr,30); \n// Use this function in place of the call above if you have PHP 4.3.0 or\n//   higher and have compiled OpenSSL into the build.\n//\n// $fp = pfsockopen(\"ssl://\".$host, 443, $errno, $errstr);\n// \nif( $fp ) { \n\n// send data\nfwrite($fp,$request); \n\n// get response\n$response=\"\";\nwhile( !feof($fp) ){\n    $response .= fgets($fp,1028);\n}\nfclose($fp); \n\n// display results\necho \"RESULTS:\\\\n\";\nprint_r($response);\necho \"\\\\n\"; \n\n// check for errors\nif( preg_match(\"/status\\\\>FAILURE\\\\<\\\\/status/im\",$response) ){\n    /*\n    * TODO:\n    * write $request and $response to log file for investigation\n    * and retries\n    */\n    echo \"<h1>Failure</h1>\\\\n\";\n    echo \"<p>Note the reason tag in the response, fix and try again.</h1>\\\\n\";\n}\n} else {\necho \"<H1>Couldn't open port to Analytics servers</H1>\\\\n\"; \nif(!$rsid){\n    echo \"<H4>No report suite specified</H4>\\\\n\";\n} else {\n    echo \"<p>$errstr ($errno)</p>\\\\n\";\n    /*\n    * TODO:\n    * write $request and $errstr to log file for investigation\n    * and retries\n    */\n}\n}\n?>\n`}</code></pre>\n    <p><strong parentName=\"p\">{`Parent topic:`}</strong>{` `}<a parentName=\"p\" {...{\n        \"href\": \"../sample_code/c_sample_code.md\"\n      }}>{`Sample Code`}</a></p>\n\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n      "],"sourceRoot":""}