(self.webpackChunkdev_site_documentation_template=self.webpackChunkdev_site_documentation_template||[]).push([[33181],{26070:function(e,t,n){"use strict";n.r(t),n.d(t,{_frontmatter:function(){return d},default:function(){return m}});var a=n(22122),r=n(19756),o=(n(15007),n(64983)),i=n(99536),s=["components"],d={},p={_frontmatter:d},l=i.Z;function m(e){var t=e.components,n=(0,r.Z)(e,s);return(0,o.mdx)(l,(0,a.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,o.mdx)("h1",{id:"step-7-verify-the-data-import-and-classification"},"Step 7: Verify the Data Import and Classification"),(0,o.mdx)("p",null,"The import job can take several hours to complete once it has been submitted. Once the import job finishes processing, you can check if the data was properly classified in the Adobe Experience Cloud by running a report on Brands or Categories."),(0,o.mdx)("p",null,"In Analytics UI, navigate to ",(0,o.mdx)("strong",{parentName:"p"},"Products")," ",">"," ",(0,o.mdx)("strong",{parentName:"p"},"Products")," ",">"," ",(0,o.mdx)("strong",{parentName:"p"},"Brand"),"."),(0,o.mdx)("p",null,"Notice that the report data that comes back shows the brand classification data that you added."),(0,o.mdx)("h2",{id:"export-classification-records"},"Export classification records"),(0,o.mdx)("p",null,"After you create, populate and import your classifications for the first time, you might find that you need to update them. In this section, you will learn how to export, update and re-import classification records in three steps:"),(0,o.mdx)("ol",null,(0,o.mdx)("li",{parentName:"ol"},"Create an export job using the ",(0,o.mdx)("inlineCode",{parentName:"li"},"Saint.ExportCreateJob()")," method."),(0,o.mdx)("li",{parentName:"ol"},"Check the job status using the ",(0,o.mdx)("inlineCode",{parentName:"li"},"Saint.CheckJobStatus()")," method."),(0,o.mdx)("li",{parentName:"ol"},"Retrieve the report data using the ",(0,o.mdx)("inlineCode",{parentName:"li"},"Saint.ExportGetFileSegment()")," method.")),(0,o.mdx)("p",null,"After you retrieve the data, you can update it and then import using the information outlined earlier in this article for creating and populating an import job."),(0,o.mdx)("h2",{id:"creating-an-export-job"},"Creating an export job"),(0,o.mdx)("p",null,"Create the export job using the Saint.ExportCreateJob","(",")"," method and the parameters in the following table."),(0,o.mdx)("table",null,(0,o.mdx)("thead",{parentName:"table"},(0,o.mdx)("tr",{parentName:"thead"},(0,o.mdx)("th",{parentName:"tr",align:null},"Parameters"),(0,o.mdx)("th",{parentName:"tr",align:null},"Description"))),(0,o.mdx)("tbody",{parentName:"table"},(0,o.mdx)("tr",{parentName:"tbody"},(0,o.mdx)("td",{parentName:"tr",align:null},"report","_","suite","_","array"),(0,o.mdx)("td",{parentName:"tr",align:null},"The list of report suites from which to export data.")),(0,o.mdx)("tr",{parentName:"tbody"},(0,o.mdx)("td",{parentName:"tr",align:null},"campaign","_","filter","_","option"),(0,o.mdx)("td",{parentName:"tr",align:null},"The filter option based on campaign activity or date. Supported values include: ",(0,o.mdx)("inlineCode",{parentName:"td"},"0"),": All Campaigns ","(","No filter",")"," ","(","default",")"," ",(0,o.mdx)("inlineCode",{parentName:"td"},"1"),": Active campaigns ",(0,o.mdx)("inlineCode",{parentName:"td"},"2"),": Campaign by begin and end date")),(0,o.mdx)("tr",{parentName:"tbody"},(0,o.mdx)("td",{parentName:"tr",align:null},"campaign","_","filter","_","begin","_","range"),(0,o.mdx)("td",{parentName:"tr",align:null},"The campaign start date to filter the data.")),(0,o.mdx)("tr",{parentName:"tbody"},(0,o.mdx)("td",{parentName:"tr",align:null},"campaign","_","filter","_","end","_","range"),(0,o.mdx)("td",{parentName:"tr",align:null},"The campaign end date to filter the data.")),(0,o.mdx)("tr",{parentName:"tbody"},(0,o.mdx)("td",{parentName:"tr",align:null},"date","_","filter","_","row","_","start","_","date"),(0,o.mdx)("td",{parentName:"tr",align:null},"The start date for including rows in the export.")),(0,o.mdx)("tr",{parentName:"tbody"},(0,o.mdx)("td",{parentName:"tr",align:null},"date","_","filter","_","row","_","end","_","date"),(0,o.mdx)("td",{parentName:"tr",align:null},"The end date for including rows in the export.")),(0,o.mdx)("tr",{parentName:"tbody"},(0,o.mdx)("td",{parentName:"tr",align:null},"email","_","address"),(0,o.mdx)("td",{parentName:"tr",align:null},"The email address to receive SAINT export job notifications.")),(0,o.mdx)("tr",{parentName:"tbody"},(0,o.mdx)("td",{parentName:"tr",align:null},"relation","_","id"),(0,o.mdx)("td",{parentName:"tr",align:null},"The unique ID for the basic report element data you are exporting. This ID is returned from the ",(0,o.mdx)("inlineCode",{parentName:"td"},"Saint.GetCompatibilityMetrics()")," method.")))),(0,o.mdx)("p",null,"The following code shows you how to export filtered classification records."),(0,o.mdx)("p",null,(0,o.mdx)("strong",{parentName:"p"},"PHP Code")," "),(0,o.mdx)("pre",null,(0,o.mdx)("code",{parentName:"pre"},"/* SAINT Export Create Job */ \n$exportParams = array( \n'campaign_filter_begin_range'=>'', \n'campaign_filter_end_range'=>'', \n'campaign_filter_option'=>0, \n'date_filter_row_start_date'=>'Jan 2000', \n'date_filter_row_end_date'=>'Jan 2050', \n'email_address'=>$notification_email, \n'relation_id'=>, // relation id \n'report_suite_array'=>$report_suite_array, \n'row_match_filter_empty_column_name'=>'', \n'row_match_filter_match_column_name'=>'', \n'row_match_filter_match_column_value'=>'', \n'select_all_rows'=>0, \n'select_number_of_rows'=>10000 \n); \n\n$response = sendRequest('Saint.ExportCreateJob', $exportParams ); \nif (is_string($response)) { \n$job_id = (int)$response; \nif (!is_int($job_id)) \n$job_id = FALSE; \n} else { \n$job_id = FALSE; \n} \nvar_dump($job_id); \n?>\n")),(0,o.mdx)("p",null,(0,o.mdx)("strong",{parentName:"p"},"Java Code")," "),(0,o.mdx)("pre",null,(0,o.mdx)("code",{parentName:"pre"},'/* Call Saint.ExportCreateJob -Submits parameters to create an export file in SAINT. This file represents classifications for a given relation */ \nString responseExportCreateJob = port.saintExportCreateJob("", "", 0, "Jan 2000", "Jan 2050", "", "", , report_suite_array, "", "", "", 0, 1000); \nSystem.out.println("responseExportCreateJob retuned a : "+responseExportCreateJob);\n')),(0,o.mdx)("h2",{id:"checking-the-job-status"},"Checking the Job Status"),(0,o.mdx)("p",null,"After creating an export job, you can check on its status using ",(0,o.mdx)("inlineCode",{parentName:"p"},"Saint.CheckJobStatus()")," method."),(0,o.mdx)("p",null,"This method returns a two-part status response that is an array where you must look for both a status of ",(0,o.mdx)("inlineCode",{parentName:"p"},"completed")," and ",(0,o.mdx)("inlineCode",{parentName:"p"},"Ready"),"."),(0,o.mdx)("p",null,"When this condition occurs store the ",(0,o.mdx)("inlineCode",{parentName:"p"},"file_id")," and the ",(0,o.mdx)("inlineCode",{parentName:"p"},"viewable_pages")," from the second response part."),(0,o.mdx)("pre",null,(0,o.mdx)("code",{parentName:"pre"},"/* SAINT Check Report Status */ \n$max_checks=40; \n$check_rate_seconds=3; \n$response = ''; \n$done = FALSE; \n$viewable_pages = 0; \n$file_id = 0; \n$check_count = 0; \nwhile (!$done && $check_count < $max_checks) { \nsleep($check_rate_seconds); \nif ($debug) echo(\"st_exportCheckAndRetrieve(): checking job_id = $job_id\\n\"); \n/* Saint.CheckJobStatus */ \n$response = sendRequest('Saint.CheckJobStatus', array('job_id'=>$job_id ) ); \nif (is_array($response)) { \nif (stristr($response[0]['status'], 'completed') !== FALSE \n&& count($response) > 1 \n&& is_array($response[1]) \n&& $response[1]['status'] == 'Ready' \n) { \nif ($response[1]['type'] == 'file_id' && $response[1]['status'] == 'Ready') { \n$viewable_pages = $response[1]['viewable_pages']; \n$file_id = $response[1]['id']; \n} \n$done = TRUE; \nvar_dump($response); \n} \n} \n$check_count++; \nif ($debug) echo(\"st_exportCheckAndRetrieve(): looping again... $check_count\\n\"); \n}//end: while \n\nif ($check_count >= $max_checks && ! $done) throw new Exception('st_exportCheckAndRetrieve(): timed out while pinging CheckJobStatus'); \nif ($file_id <= 0) throw new Exception('st_exportCheckAndRetrieve(): no file_id was retrieved from CheckJobStatus'); \nif ($viewable_pages <= 0) throw new Exception('st_exportCheckAndRetrieve(): no viewable_pages was retrieved from CheckJobStatus'); \n?>\n")),(0,o.mdx)("p",null,(0,o.mdx)("strong",{parentName:"p"},"Java Code")," "),(0,o.mdx)("pre",null,(0,o.mdx)("code",{parentName:"pre"},'int checkCount = 0; \nint MAX_CHECKS = 40; \nint CHECK_INTERVAL = 6000; // 3 seconds \nThread.sleep(CHECK_INTERVAL); \n\n/* Export check job status */ \ncom.omniture.www.Saintresult[] exportCreateJobStatus = port.saintCheckJobStatus(Integer.parseInt(responseExportCreateJob)); \n\n/* Check status of export job */ \nwhile (!(exportCreateJobStatus[0].getStatus().equalsIgnoreCase("Completed") && exportCreateJobStatus[1].getStatus().equalsIgnoreCase("Ready"))) \n{ \nSystem.out.println("Current status for exportCreateJobStatus is: "+exportCreateJobStatus[0].getStatus()); \n\ncheckCount++; \nif (checkCount >= MAX_CHECKS) \nthrow new Exception("Report timeout: report hasn\'t returned after " + MAX_CHECKS + " status checks"); \n/* Export create job */ \nexportCreateJobStatus = port.saintCheckJobStatus(Integer.parseInt(responseExportCreateJob)); \n\nif (!(exportCreateJobStatus[0].getStatus().equalsIgnoreCase("Completed") && exportCreateJobStatus[1].getStatus().equalsIgnoreCase("Ready"))) \nThread.sleep(CHECK_INTERVAL); \n}\n')),(0,o.mdx)("h2",{id:"retrieving-the-report-data"},"Retrieving the Report Data"),(0,o.mdx)("p",null,"The export data files can be very large in size, so you can download them in batches or segments, also called pages earlier in this article."),(0,o.mdx)("p",null,"The following code shows you how to use the ",(0,o.mdx)("inlineCode",{parentName:"p"},"Saint.ExportGetFileSegment()")," method to download the file in segments when the status returns the ",(0,o.mdx)("inlineCode",{parentName:"p"},"Ready")," string."),(0,o.mdx)("p",null,(0,o.mdx)("strong",{parentName:"p"},"PHP Code")," "),(0,o.mdx)("pre",null,(0,o.mdx)("code",{parentName:"pre"},"$data_set = array(); \n$data_set['data'] = array(); \n\nfor ($i=1; $i <= $viewable_pages; $i++) { \n/* Saint.GetFileSegment */ \n$response = sendRequest('Saint.ExportGetFileSegment', array('file_id'=>$file_id, 'segment_id'=>$i ) ); \necho \"received chunk of \" . count($response[0]['data']) . \" rows.\\n\"; \nif (is_array($response) && is_array($response[0])) { \nif (!$data_set['header']) \n$data_set['header'] = $response[0]['header']; \n\nforeach($response[0]['data'] as $data_record){ \n$data_set['data'][] = $data_record['row']; \n} \n} \n} \nvar_dump($data_set); \n?>\n")),(0,o.mdx)("p",null,(0,o.mdx)("strong",{parentName:"p"},"Java Code")," "),(0,o.mdx)("pre",null,(0,o.mdx)("code",{parentName:"pre"},'/* Loop to check export job status */ \nif (exportCreateJobStatus[0].getStatus().equalsIgnoreCase("Completed")) \n{ \nSystem.out.println("Current status for exportCreateJobStatus within if loop is: "+exportCreateJobStatus[0].getStatus()); \nSystem.out.println("Another status to check for exportCreateJobStatus within if loop: "+exportCreateJobStatus[1].getStatus()); \n\n/* Check to see status is Ready */ \nif (exportCreateJobStatus[1].getStatus().equalsIgnoreCase("Ready")) \n{ \nString fileID = exportCreateJobStatus[1].getType(); \n\n/* Get the number of viewable pages */ \nint viewablePages = exportCreateJobStatus[1].getViewable_pages(); \n\nSystem.out.println("File ID is: "+fileID+" and value of viewablePages is:"+viewablePages); \n\n/* Loop over the number of pages to retrieve file segment or data */ \nfor(int i=0;i { \ncom.omniture.www.Pagedetail[] responseExportGetFileSegment = port.saintExportGetFileSegment(Integer.parseInt(fileID), i); \n\nSystem.out.println("responseExportGetFileSegment retuned the follwing headers: "+responseExportGetFileSegment[0].getHeader()); \nSystem.out.println("responseExportGetFileSegment retuned the follwing data records: "+responseExportGetFileSegment[0].getData().length); \n} \n} \n}\n')),(0,o.mdx)("p",null,(0,o.mdx)("strong",{parentName:"p"},"Parent topic:")," ",(0,o.mdx)("a",{parentName:"p",href:"c_SAINT_API_Overview.md"},"SAINT API Tutorial")))}m.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-guides-getting-started-c-verify-the-data-import-and-classification-md-e23c70bdc3d052468b5e.js.map