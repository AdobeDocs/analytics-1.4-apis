{"version":3,"sources":["webpack://dev-site-documentation-template/./src/pages/guides/getting-started/c_Add_Data_Connectors_JavaScript_Code_to_your_Analytics_JavaScript_Library_File.md"],"names":["_frontmatter","layoutProps","MDXLayout","DefaultLayout","MDXContent","components","props","mdxType","parentName","isMDXComponent"],"mappings":"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","file":"component---src-pages-guides-getting-started-c-add-data-connectors-java-script-code-to-your-analytics-java-script-library-file-md-29c78a4cf3c402467faa.js","sourcesContent":["import * as React from 'react'\n  /* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\n\nimport DefaultLayout from \"/home/runner/work/analytics-1.4-apis/analytics-1.4-apis/node_modules/@adobe/gatsby-theme-aio/src/components/MDXFilter/index.js\";\nexport const _frontmatter = {};\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout;\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n    <h1 {...{\n      \"id\": \"step-3-add-data-connectors-javascript-code-to-your-analytics-javascript-library-file\"\n    }}>{`Step 3: Add Data Connectors JavaScript Code to your Analytics JavaScript Library File`}</h1>\n    <p>{`The Data Connectors Integrate module code is a JavaScript code framework which provides methods for Customers to retrieve product data or pass Analytics variables back to a Data Connectors product. The retrieved product data can be used any way you like. For instance, you can display it in your web site or send it back to the Adobe Data Collection Layer. In this tutorial, you will do both.`}</p>\n    <p>{`In this section, you will:`}</p>\n    <ul>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`Review the code that the Data Connectors product implements for the integration`}</p>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`Review the code that you defined to map your variables to the product`}</p>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`Review the code that simulates the server-side product data`}</p>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`Customize the code to process the product data only on one web page`}</p>\n      </li>\n    </ul>\n    <h2 {...{\n      \"id\": \"data-connectors-product-code\"\n    }}>{`Data Connectors product code`}</h2>\n    <p>{`In this section, you will review the code that the Data Connectors product provides to you after you activate an integration. This section is informational only, to provide you with a basic understanding of how Data Connectors integrate code works.`}</p>\n    <ol>\n      <li parentName=\"ol\">{`In the `}<strong parentName=\"li\">{`js`}</strong>{` folder, open the integrate`}{`_`}{`code.js file. This file contains the JavaScript code that the Data Connectors product implements for the integration.`}</li>\n      <li parentName=\"ol\">{`Select all the code in the integrate`}{`_`}{`code.js file.`}</li>\n      <li parentName=\"ol\">{`Copy and paste this code in to your JavaScript library file `}{`(`}{`s`}{`_`}{`code.js`}{`)`}{` file, after the `}<strong parentName=\"li\">{`Config`}</strong>{` section and before the comment which states, \"`}<strong parentName=\"li\">{`DO NOT ALTER ANYTHING BELOW THIS LINE !`}</strong>{`\".`}</li>\n      <li parentName=\"ol\">{`In the `}<strong parentName=\"li\">{`s`}{`_`}{`code.js`}</strong>{` file, locate the `}<strong parentName=\"li\">{`s.loadModule`}{`(`}{`)`}</strong>{` function.`}</li>\n    </ol>\n    <p>{`The `}<strong parentName=\"p\">{`s.loadModule`}{`(`}{`)`}</strong>{` function has one argument which defines the module to load in to the \"`}<strong parentName=\"p\">{`s`}</strong>{`\" object. Remember that the s`}{`_`}{`code.js file uses \"`}<strong parentName=\"p\">{`s`}</strong>{`\" as the default reference object for Analytics data. In this case the Data Connectors Partner has specified the`}<strong parentName=\"p\">{`\"Integrate\"`}</strong>{` module to be loaded so that its methods can be called in the next steps.`}</p>\n    <pre><code parentName=\"pre\" {...{}}>{`s.loadModule() function\n \ns.loadModule(\"Integrate\");\n`}</code></pre>\n    <ol>\n      <li parentName=\"ol\">{`In the s`}{`_`}{`code.js file, locate the `}<strong parentName=\"li\">{`s.Integrate.add`}{`(`}{`)`}</strong>{` method.`}</li>\n    </ol>\n    <p>{`The `}<strong parentName=\"p\">{`add`}{`(`}{`)`}</strong>{` method instantiates a partner object as an intermediate area to hold variable data. Each Data Connectors product will have a unique partner object name.`}</p>\n    <p>{`In this example, the Data Connectors Partner has named this argument, \"`}<strong parentName=\"p\">{`JJEsquireTwitterPod`}</strong>{`\"..`}</p>\n    <pre><code parentName=\"pre\" {...{}}>{`Integrate add() method\n \ns.loadModule(\"Integrate\");\ns.Integrate.add(\"JJEsquireTwitterPod\");\n`}</code></pre>\n    <h2 {...{\n      \"id\": \"mapped-variable-code\"\n    }}>{`Mapped variable code`}</h2>\n    <p>{`In this section, you will review the code that maps the Data Connectors product variables to the Analytics variables. These are all the variables which you mapped in Step 1 of this tutorial, `}<strong parentName=\"p\">{`Activate the integration for your Analytics report suite`}</strong>{`.`}</p>\n    <p>{`You do not need to make any changes to this code, as it is provided to you from the Adobe engineering team.`}</p>\n    <ol>\n      <li parentName=\"ol\">{`In the s`}{`_`}{`code.js file, locate the `}<strong parentName=\"li\">{`s.Integrate.JJEsquireTwitterPod.setVars`}{`(`}{`)`}</strong>{` method.`}</li>\n    </ol>\n    <p>{`The `}<strong parentName=\"p\">{`setVars`}{`(`}{`)`}</strong>{` method maps Data Connectors product data to your Analytics variables.`}</p>\n    <p>{`The syntax for the `}<strong parentName=\"p\">{`setVars`}{`(`}{`)`}</strong>{` method is shown below.`}</p>\n    <pre><code parentName=\"pre\" {...{}}>{`Integrate setVars() method syntax\n \ns.Integrate.<partnerName>.setVars = function (s,p) {\ns.<SCVar1> = p.<PVar1>;\ns.<SCVar2> = p.<PVar2>;\n...\ns.<SCVarN> = p.<PVarN>;\n};\n`}</code></pre>\n    <p>{`The `}<strong parentName=\"p\">{`setVars`}{`(`}{`)`}</strong>{` method has the following properties as shown in Table 1.`}</p>\n    <table>\n      <thead parentName=\"table\">\n        <tr parentName=\"thead\">\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Property`}</th>\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Description`}</th>\n        </tr>\n      </thead>\n      <tbody parentName=\"table\">\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`partnerName`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`The name of the partner object created with the add`}{`(`}{`)`}{` method.`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`s`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`The reference object for Analytics data.`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`p`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`The reference object for Data Connectors product data.`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`SCVarN`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`The name of the Analytics variable to be assigned a value from a Data Connectors product variable.`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`PVarN`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`The name of the of the Data Connectors product variable to import into Analytics.`}</td>\n        </tr>\n      </tbody>\n    </table>\n    <p>{`Table 1. The Integrate setVars`}{`(`}{`)`}{` function properties`}</p>\n    <p>{`Notice that `}<strong parentName=\"p\">{`s.eVar3`}</strong>{` is set to `}<strong parentName=\"p\">{`p.twitter`}{`_`}{`handle`}</strong>{` and `}<strong parentName=\"p\">{`s.events`}</strong>{` is set to `}<strong parentName=\"p\">{`\"event3\"`}</strong>{`.`}</p>\n    <p>{`In this demo, the custom conversion variable, `}<strong parentName=\"p\">{`eVar3`}</strong>{`, is set to the Twitter handle of the current visitor to the web site. The custom event, `}<strong parentName=\"p\">{`event3`}</strong>{`, is set to track the number of followers for the current visitor.`}</p>\n    <pre><code parentName=\"pre\" {...{}}>{`Integrate setVars() method\n \ns.loadModule(\"Integrate\");\ns.Integrate.add(\"JJEsquireTwitterPod\");\ns.Integrate.JJEsquireTwitterPod.setVars=function(s,p)\n{\n      s.eVar3 = p.twitter_handle;\n      s.events = \"event3\";\n}\n`}</code></pre>\n    <ol>\n      <li parentName=\"ol\">{`In the s`}{`_`}{`code.js file, locate the`}<strong parentName=\"li\">{`s.products`}</strong>{` variable.`}</li>\n    </ol>\n    <p>{`The `}<strong parentName=\"p\">{`s.products`}</strong>{` variable is used in conjunction with the event to pass additional data, such as product name and event value. The product name is set so that it can be viewed in the Products Report in Analytics. You will see the data in the Products Report in `}<strong parentName=\"p\">{`Step 6: Run Analytics reports to verify Partner data collection`}</strong>{`.`}</p>\n    <p>{` `}<strong parentName=\"p\">{`Note`}</strong>{`: You can learn more about this and other Analytics variables in the `}<strong parentName=\"p\">{`Collect visitor analytics using Analytics JavaScript Tagging`}</strong>{` tutorial.`}</p>\n    <pre><code parentName=\"pre\" {...{}}>{`s.products parameters\n \ns.products = \"Category; Product; Quantity; Price; Event  [, Category; Product; Quantity; Price; Event]\"\n`}</code></pre>\n    <p><strong parentName=\"p\">{`s.products parameters`}</strong>{` s.products = \"Category; Product; Quantity; Price; Event `}{`[`}{`, Category; Product; Quantity; Price; Event`}{`]`}{`\"`}</p>\n    <p>{` `}<strong parentName=\"p\">{`Note`}</strong>{`: Use a semicolon between values in one product and a comma to separate products.`}</p>\n    <p>{`Notice that the product name is set to `}<strong parentName=\"p\">{`follower`}{`_`}{`count`}</strong>{` and the `}<strong parentName=\"p\">{`event3`}</strong>{` value is set to the number of followers for the current visitor.`}</p>\n    <pre><code parentName=\"pre\" {...{}}>{`Integrate setVars() method\n \ns.loadModule(\"Integrate\");\ns.Integrate.add(\"JJEsquireTwitterPod\");\ns.Integrate.JJEsquireTwitterPod.setVars=function(s,p)\n{\n                   s.eVar3 = p.twitter_handle;\n      s.events = \"event3\";\n                   s.products = \";follower_count;;;event3=\" + p.twitter_followers;\n}\n`}</code></pre>\n    <h2 {...{\n      \"id\": \"code-to-simulate-server-side-product-data\"\n    }}>{`Code to simulate server-side product data`}</h2>\n    <p>{`In this section, you will review the code which simulates retrieving product data from the server. Typically, the Data Connectors Partner will use the `}<strong parentName=\"p\">{`get`}{`(`}{`)`}</strong>{` method to import product data from a url. This code would be included in the Data Connectors JavaScript code provided to you.`}</p>\n    <p>{`To simplify this demo, you will not use server-side technology. Instead, you will call the `}<strong parentName=\"p\">{`getTwitterData`}{`(`}{`)`}</strong>{` function within the`}<strong parentName=\"p\">{`twitter`}{`_`}{`generator.js`}</strong>{` JavaScript file to simulate returning product data from the server. The data is returned as a JSON object, which is then assigned to the product variables.`}</p>\n    <p>{`You do not need to make any changes to this code, as it is provided to you from the Adobe engineering team.`}</p>\n    <ol>\n      <li parentName=\"ol\">{`In the s`}{`_`}{`code.js file, locate the call to the `}<strong parentName=\"li\">{`getTwitterData`}{`(`}{`)`}</strong>{` method and the assignment of the`}<strong parentName=\"li\">{`p.twitter`}{`_`}{`handle`}</strong>{` and`}<strong parentName=\"li\">{`p.twitter`}{`_`}{`followers`}</strong>{` product variables.`}</li>\n    </ol>\n    <pre><code parentName=\"pre\" {...{}}>{`Statically set partner object variables\n \ns.loadModule(\"Integrate\");\ns.Integrate.add(\"JJEsquireTwitterPod\");\ns.Integrate.JJEsquireTwitterPod.setVars=function(s,p)\n{\n      eval(getTwitterData());\n      p.twitter_handle = s_1_Integrate_twitterexample_get_0.author_handle;\n      p.twitter_followers = s_1_Integrate_twitterexample_get_0.followers;  \n                   s.eVar3 = p.twitter_handle;\n      s.events = \"event3\";\n                   s.products = \";follower_count;;;event3=\" + p.twitter_followers;\n              }\n`}</code></pre>\n    <h2 {...{\n      \"id\": \"custom-code-to-process-product-data-only-on-one-web-page\"\n    }}>{`Custom code to process product data only on one web page`}</h2>\n    <p>{`In this section, you will add a conditional statement to the Data Connectors JavaScript code provided to you, to retrieve the product data and assign it to Analytics variables only on the web page where the data is used.`}</p>\n    <p>{`Because each web application page with Analytics JavaScript code calls the s`}{`_`}{`code.js file, you will add a conditional statement to the Data Connectors JavaScript code in the s`}{`_`}{`code.js file to check the current page. Since the product data associated with the twitter handle and twitter followers is only relevant for the JJ. Esquire Product List page, you will check for this web page.`}</p>\n    <ol>\n      <li parentName=\"ol\">{`Add an `}<strong parentName=\"li\">{`if`}</strong>{` statement that checks whether the visitor is on the product list page of the application. Check the `}<strong parentName=\"li\">{`s.pageName`}</strong>{` variable which is set on each web page within the Analytics JavaScript page code for a value of \"`}<strong parentName=\"li\">{`Product List Page`}</strong>{`\".`}</li>\n    </ol>\n    <pre><code parentName=\"pre\" {...{}}>{`Integrate setVars() method\n \ns.loadModule(\"Integrate\");\ns.Integrate.add(\"JJEsquireTwitterPod\");\ns.Integrate.JJEsquireTwitterPod.setVars=function(s,p)\n{\nif(s.pageName==\"Product List Page\"){\n      eval(getTwitterData());\n      p.twitter_handle = s_1_Integrate_twitterexample_get_0.author_handle;\n      p.twitter_followers = s_1_Integrate_twitterexample_get_0.followers;        \n                                s.eVar3 = p.twitter_handle;\n      s.events = \"event3\";\n                                s.products = \";follower_count;;;event3=\" + p.twitter_followers;\n}\n}\n`}</code></pre>\n    <p><strong parentName=\"p\">{`Parent topic:`}</strong>{` `}<a parentName=\"p\" {...{\n        \"href\": \"c_Integrate_Data_Connectors_Partner_Data_into_Customer_Application.md\"\n      }}>{`3. Integrate Partner Data Tutorial`}</a></p>\n\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n      "],"sourceRoot":""}