{"version":3,"sources":["webpack://dev-site-documentation-template/./src/pages/guides/getting-started/c_PHP.md"],"names":["_frontmatter","layoutProps","MDXLayout","DefaultLayout","MDXContent","components","props","mdxType","parentName","isMDXComponent"],"mappings":"qTAQaA,EAAe,GACtBC,EAAc,CAClBD,gBAEIE,EAAYC,IACH,SAASC,EAAT,GAGX,IAFFC,EAEC,EAFDA,WACGC,GACF,YACD,OAAO,SAACJ,GAAD,UAAeD,EAAiBK,EAAhC,CAAuCD,WAAYA,EAAYE,QAAQ,eAG5E,eACE,GAAM,OADR,QAGA,kGACA,eACE,GAAM,uDADR,wDAGA,iOAAkN,uBAAYC,WAAW,KAAvB,OAAlN,uBAAwR,cAAGA,WAAW,IAClS,KAAQ,mDAD4Q,8CAAxR,MAGA,eACE,GAAM,wCADR,yCAGA,iFACA,oBACE,eAAIA,WAAW,OAAK,uBAAYA,WAAW,MAAvB,uBAApB,8EACA,eAAIA,WAAW,MAAf,4FAAmH,mBAAQA,WAAW,MAAnB,aAAnH,OAEF,mDAAoC,uBAAYA,WAAW,KAAvB,cAApC,SAAmG,uBAAYA,WAAW,KAAvB,iBAAnG,sDACA,qBAAK,iBAAMA,WAAW,OAAjB,svEAuEL,eACE,GAAM,0CADR,2CAGA,wIACA,+FACA,qBAAK,iBAAMA,WAAW,OAAjB,8iBAiBL,mBAAG,mBAAQA,WAAW,KAAnB,iBAAH,KAAyD,cAAGA,WAAW,IACnE,KAAQ,kCAD6C,uCAO7DJ,EAAWK,gBAAiB","file":"component---src-pages-guides-getting-started-c-php-md-d4b1621ddb4c48c5a994.js","sourcesContent":["import * as React from 'react'\n  /* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\n\nimport DefaultLayout from \"/home/runner/work/analytics-1.4-apis/analytics-1.4-apis/node_modules/@adobe/gatsby-theme-aio/src/components/MDXFilter/index.js\";\nexport const _frontmatter = {};\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout;\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n    <h1 {...{\n      \"id\": \"php\"\n    }}>{`PHP`}</h1>\n    <p>{`In this section you will learn some highlights about the provided PHP code.`}</p>\n    <h2 {...{\n      \"id\": \"replace-the-wsdl-file-in-the-provided-solution-code\"\n    }}>{`Replace the WSDL file in the provided solution code`}</h2>\n    <p>{`Each of the solution files provided in the articles contains a WSDL file. However, since this file does occasionally change, you should replace the OmnitureAdminServices.wsdl in the wsdl folder with the `}<inlineCode parentName=\"p\">{`one`}</inlineCode>{` you downloaded in `}<a parentName=\"p\" {...{\n        \"href\": \"c_Download_the_Digital_Marketing_Suite_WSDL.md#\"\n      }}>{`Step 3: Download the Experience Cloud WSDL`}</a>{`.`}</p>\n    <h2 {...{\n      \"id\": \"review-the-soap-security-header-code\"\n    }}>{`Review the SOAP security header code`}</h2>\n    <p>{`The SOAPRequest.php file contains the following functions:`}</p>\n    <ul>\n      <li parentName=\"ul\"><inlineCode parentName=\"li\">{`getSecurityHeader()`}</inlineCode>{` function: Creates the SOAP security header to access the Analytics APIs.`}</li>\n      <li parentName=\"ul\">{`The sendRequest`}{`(`}{`)`}{` function: Sends the SOAP request with the security header to `}<strong parentName=\"li\">{`Analytics`}</strong>{`.`}</li>\n    </ul>\n    <p>{`You will need to replace the `}<inlineCode parentName=\"p\">{`auth_login`}</inlineCode>{` and `}<inlineCode parentName=\"p\">{`auth_password`}</inlineCode>{` values with your own authentication information.`}</p>\n    <pre><code parentName=\"pre\" {...{}}>{`/* Generates the security header required to access the Analytics API */ \nfunction getSecurityHeader() \n{ \n$auth_login = '<your user name>'; \n$auth_password = '<your shared secret>'; \n$company = ''; \n$nonce_part = 0; \n/* seed random */ \nlist($usec, $sec) = explode(' ', microtime()); \n/*srand((float) $sec + ((float) $usec * 100000));*/ \n/*$nonce = md5(rand());*/ \n$nonce = $nonce_part . '-' . $sec . '-' . $usec ; \n/*echo \"NONCE: $nonce\\\\n\";*/ \n$created = date(\"Y-m-d H:i:s\"); \n$combo_string = $nonce . $created . $auth_password; \n\n/* Note: the sha1 command is not available in all versions of PHP. If your version of PHP does not support this command, you \ncan use openssl directly with the command: \necho -n <string> | openssl dgst -sha1 */ \n$sha1_string = sha1($combo_string); \n$pwDigest = base64_encode($sha1_string); \n$headers = '<wsse:Security SOAP-ENV:mustUnderstand=\"1\"> \n<wsse:UsernameToken wsu:Id=\"User\"> \n<wsse:Username>'.$auth_login.'</wsse:Username> \n<wsse:Password Type=\"http://docs.oasis-open.org/wss/2004/01/oasis-200401- \nwss-username-token-profile-1.0#PasswordDigest\">'.$pwDigest.'</wsse:Password> \n<wsse:Nonce>'.$nonce.'</wsse:Nonce> \n<wsu:Created>'.$created.'</wsu:Created> \n</wsse:UsernameToken> \n</wsse:Security>'; \nif($company){ \n$headers .= '<AdminInfo> \n<company>'.$company.'</company> \n</AdminInfo>'; \n} \n# echo \"headers: $headers\\\\n\"; \n\nreturn $headers; \n\n}/* getSecurityHeader()*/ \n\n/** \n* send a SOAP request to Analytics \n* \n* @param string $report_type \n* @param array $params Contains the Report Description for the request \n* \n* @return array $response Data Structure containing report description and data requested \n*/ \nfunction sendRequest($report_type, $params ) \n{ \nglobal $soap_client, $debug; \n$response = $soap_client->call( \n$report_type, \n$params, \n'http://www.omniture.com', //namespace \n'', //Soap Action \ngetSecurityHeader() \n); \n\nif($debug) echo \"\\\\n=== REQUEST ===\\\\n\" . $soap_client->request . \"\\\\n\"; \n\nif($debug) echo \"\\\\n=== RESPONSE ===\\\\n\" . $soap_client->response . \"\\\\n\"; \n\n/* Check the request response for issues */ \nif($err = $soap_client->getError()) \nthrow new Exception(\"sendRequest(): SOAP ERROR: $err\", 0); \n\nreturn($response); \n} \n`}</code></pre>\n    <h2 {...{\n      \"id\": \"review-the-code-to-connect-to-the-wsdl\"\n    }}>{`Review the code to connect to the WSDL`}</h2>\n    <p>{`The provided PHP code uses the NuSOAP toolkit to create a client application to connect with the web service API.`}</p>\n    <p>{`Each main PHP file uses the following code to connect to the local WSDL.`}</p>\n    <pre><code parentName=\"pre\" {...{}}>{`require_once('nusoap.php'); \n/* Include the common functions to send a SOAP request to Analytics. */ \nrequire_once('library/SOAPRequest.php'); \n\n/* Set the variables for the environment */ \nini_set('memory_limit', -1); \n$debug = true; \n\n/* Set a variable for the local copy of the wsdl file */ \n$wsdl = 'wsdl/OmnitureAdminServices.wsdl'; \n\n/* Error if wsdl file not found */ \nif ( !is_file($wsdl) ) throw new Exception('WSDL not located.', 0); \n\n/* Setup Data Center Soap Client object */ \n$soap_client = new soap_client($wsdl, TRUE); \n`}</code></pre>\n    <p><strong parentName=\"p\">{`Parent topic:`}</strong>{` `}<a parentName=\"p\" {...{\n        \"href\": \"c_Update_the_Solution_Files.md\"\n      }}>{`Step 4: Update the Solution Files`}</a></p>\n\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n      "],"sourceRoot":""}