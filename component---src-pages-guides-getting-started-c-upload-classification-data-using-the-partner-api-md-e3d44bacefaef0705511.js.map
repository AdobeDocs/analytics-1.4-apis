{"version":3,"sources":["webpack://dev-site-documentation-template/./src/pages/guides/getting-started/c_Upload_Classification_Data_using_the_Partner_API.md"],"names":["_frontmatter","layoutProps","MDXLayout","DefaultLayout","MDXContent","components","props","mdxType","parentName","isMDXComponent"],"mappings":"qTAQaA,EAAe,GACtBC,EAAc,CAClBD,gBAEIE,EAAYC,IACH,SAASC,EAAT,GAGX,IAFFC,EAEC,EAFDA,WACGC,GACF,YACD,OAAO,SAACJ,GAAD,UAAeD,EAAiBK,EAAhC,CAAuCD,WAAYA,EAAYE,QAAQ,eAG5E,eACE,GAAM,2DADR,6DAGA,iTACA,eACE,GAAM,2DADR,4DAGA,oVACA,oBACE,eAAIC,WAAW,MAAf,oCAAwD,mBAAQA,WAAW,MAAnB,qBAAxD,0FAAwM,mBAAQA,WAAW,MAAnB,2BAAxM,gJAEF,qBAAK,iBAAMA,WAAW,OAAjB,iSAWL,qBAAK,iBAAMA,WAAW,OAAjB,wRASL,mNACA,eACE,GAAM,oDADR,qDAGA,uOAAwN,mBAAQA,WAAW,KAAnB,gCAAxN,mDACA,mBAAG,mBAAQA,WAAW,KAAnB,6CAAH,MACA,sHAAuG,mBAAQA,WAAW,KAAnB,sBAAvG,YAAyK,mBAAQA,WAAW,KAAnB,aAAzK,uEACA,mBAAG,mBAAQA,WAAW,KAAnB,+BAAH,MACA,8GACA,qBAAK,iBAAMA,WAAW,OAAjB,qBAIL,qBAAK,iBAAMA,WAAW,OAAjB,gjCAmCL,qBAAK,iBAAMA,WAAW,OAAjB,+gDA2CL,mBAAG,mBAAQA,WAAW,KAAnB,iEAAH,MACA,+CAAgC,mBAAQA,WAAW,KAAnB,gCAAhC,iOACA,uFACA,oBACE,eAAIA,WAAW,OAAK,mBAAQA,WAAW,MAAnB,cAApB,4EACA,eAAIA,WAAW,OAAK,mBAAQA,WAAW,MAAnB,eAApB,kFACA,eAAIA,WAAW,OAAK,mBAAQA,WAAW,MAAnB,QAApB,yCACA,eAAIA,WAAW,OAAK,mBAAQA,WAAW,MAAnB,cAApB,oFAEF,mBAAG,mBAAQA,WAAW,KAAnB,SAAH,0LACA,qBAAK,iBAAMA,WAAW,OAAjB,qBAIL,qBAAK,iBAAMA,WAAW,OAAjB,62CAoCL,qBAAK,iBAAMA,WAAW,OAAjB,8pCA+BL,eACE,GAAM,+DACL,mBAAQA,WAAW,MAAnB,iEACH,sPACA,qBAAK,iBAAMA,WAAW,OAAjB,qBAIL,qBAAK,iBAAMA,WAAW,OAAjB,gWASL,qBAAK,iBAAMA,WAAW,OAAjB,0RAQL,mBAAG,mBAAQA,WAAW,KAAnB,iBAAH,KAAyD,cAAGA,WAAW,IACnE,KAAQ,oDAD6C,uCAO7DJ,EAAWK,gBAAiB","file":"component---src-pages-guides-getting-started-c-upload-classification-data-using-the-partner-api-md-e3d44bacefaef0705511.js","sourcesContent":["import * as React from 'react'\n  /* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\n\nimport DefaultLayout from \"/home/runner/work/analytics-1.4-apis/analytics-1.4-apis/node_modules/@adobe/gatsby-theme-aio/src/components/MDXFilter/index.js\";\nexport const _frontmatter = {};\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout;\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n    <h1 {...{\n      \"id\": \"step-5-upload-classification-data-using-the-partner-api\"\n    }}>{`Step 5: Upload Classification Data using the Partner API`}</h1>\n    <p>{`When a Customer executes the Integration Wizard, it runs the Product Builder scripts and creates the classification columns in the report suite. In this section you will learn how to write PHP, Java and C`}{`#`}{` code to access the Partner API and upload data to the classifications.`}</p>\n    <h2 {...{\n      \"id\": \"retrieve-all-the-available-integrations-for-the-partner\"\n    }}>{`Retrieve all the available integrations for the partner`}</h2>\n    <p>{`To upload the data, you must first identify one or all of the existing Customer integrations to your data connectors product. In this step, you will loop over all the integrations to upload data. However, since this JJ. Esquire demo application only includes one integration, you will update only the one integration.`}</p>\n    <ol>\n      <li parentName=\"ol\">{`Open the solution file from the `}<strong parentName=\"li\">{`Downloads section`}</strong>{` of this article in your IDE and review the code to retrieve all the integrations. The`}<strong parentName=\"li\">{`Partner.GetIntegrations`}</strong>{` method returns details about all the active data connectors integrations in an array. You loop over the array to access each integration.`}</li>\n    </ol>\n    <pre><code parentName=\"pre\" {...{}}>{`Java Code\n \n/* Get all the Partner integrations */\nIntegrationDetail[] integrationDetails = genesisIntegrationWebServicePortType.partnerGetIntegrations(\"\");\n \n/* Loop over all the Partner integrations */\nfor (IntegrationDetail integrationDetail : integrationDetails)\n{\n \n}\n`}</code></pre>\n    <pre><code parentName=\"pre\" {...{}}>{`C# Code\n \nintegrationDetail[] integrationDetails = genesisIntegrationWebServicePortTypeClient.PartnerGetIntegrations(\"\");\n \n /* For each product go through and upload a classification to the system */\n   for (int i = 0; i < integrationDetails.Length; i++)\n   {\n   }\n`}</code></pre>\n    <p>{`In the next step, you will create a function to upload all of the classification data to the report suite. In Step 3, you will return to this loop to run the function for each integration.`}</p>\n    <h2 {...{\n      \"id\": \"upload-classified-data-to-adobe-experience-cloud\"\n    }}>{`Upload classified data to Adobe Experience Cloud`}</h2>\n    <p>{`In this section, you will upload the data to be classified to the Adobe Experience Cloud. This requires you to use the sample data provided in the solution file, import the data into an array and then use the `}<strong parentName=\"p\">{`Import.UploadClassifications`}</strong>{` Partner API method to upload the actual data.`}</p>\n    <p><strong parentName=\"p\">{`Review the sample data for classification`}</strong>{` `}</p>\n    <p>{`The solution file that you downloaded earlier in the article includes a sample data file called `}<strong parentName=\"p\">{`classification.txt`}</strong>{` in the `}<strong parentName=\"p\">{`resources`}</strong>{`directory. Open this file and notice the classification data rows.`}</p>\n    <p><strong parentName=\"p\">{`Import data from local file`}</strong>{` `}</p>\n    <p>{`Create a function that reads in the data from the local file and stores it in an array.`}</p>\n    <pre><code parentName=\"pre\" {...{}}>{`PHP Code\n \n\n`}</code></pre>\n    <pre><code parentName=\"pre\" {...{}}>{`Java Code\n \nprivate String[][] getClassificationRowsFromFile()\n    {\n       ArrayList<String[]> classifications = new ArrayList<String[]>();\n        try\n        {\n            /* Read in file name */\n            String classificationFile = \"resources/classifications.txt\";\n \n            /* Create an instance of BufferedReader */\n            BufferedReader input = new BufferedReader(new FileReader(classificationFile));\n            try\n            {\n                String line;\n \n                  /* Read in data from file and store it in an array */\n                while ((line = input.readLine()) != null)\n                {\n                    String[] lineParts = line.split(\"\\\\t\");\n                    classifications.add(lineParts);\n                }\n            }\n            finally\n            {\n                input.close();\n            }\n        }\n        catch (IOException ex)\n        {\n            ex.printStackTrace();\n        }\n        return classifications.toArray(new String[classifications.size()][]); \n    }\n`}</code></pre>\n    <pre><code parentName=\"pre\" {...{}}>{`C# Code\n \npublic static String[][] getClassificationRowsFromFile()\n    {\n       ArrayList classifications = new ArrayList();\n  \n        try\n        {\n            String classificationFile = Path.Combine(Environment.CurrentDirectory, \"resources\\\\\\\\classifications.txt\");\n            FileStream fileStream = File.OpenRead(classificationFile);\n            StreamReader streamReader = new StreamReader(classificationFile);\n            string line;\n \n            /* Read in all the data from the classification file into an arraylist */\n            while ((line = streamReader.ReadLine()) != null)\n             {\n                    String[] lineParts = line.Split('\\\\t');\n                    classifications.AddRange(lineParts);\n                \n             }\n \n             streamReader.Close();\n        }\n       \n        catch (Exception ex)\n        {\n            Console.WriteLine(ex.Message);\n            Console.WriteLine(ex.InnerException);\n        }\n \n        /* Use the ArrayList data to populate the jagged array and return the row data */\n        String[] stringclassificationsArray = (String[])classifications.ToArray(typeof(string));\n        string[][] rows = new string[classifications.Count/4][];\n \n        for (int i = 0; i < classifications.Count / 4; i++)\n        {\n            rows[i] = new string[4] { stringclassificationsArray[i], stringclassificationsArray[i + 1], stringclassificationsArray[i + 2], stringclassificationsArray[i+3] };\n        }\n \n        return rows;\n       \n    }\n`}</code></pre>\n    <p><strong parentName=\"p\">{`Define parameters for the Import.UploadClassifications method`}</strong>{` `}</p>\n    <p>{`The Partner API uses the `}<strong parentName=\"p\">{`Import.UploadClassifications`}</strong>{` method to upload data to the classifications columns you created earlier in the report suite. Remember that for this JJ. Esquire demo application, you are classifying the Twitter handles based on gender, age and region.`}</p>\n    <p>{`You must first define values for the following method arguments:`}</p>\n    <ul>\n      <li parentName=\"ul\"><strong parentName=\"li\">{`metricName`}</strong>{` - The name of the metric where you want to import classification data.`}</li>\n      <li parentName=\"ul\"><strong parentName=\"li\">{`columnNames`}</strong>{` - The names of the classification columns `}{`(`}{`the column headings`}{`)`}{`.`}</li>\n      <li parentName=\"ul\"><strong parentName=\"li\">{`rows`}</strong>{` - The classification data to import`}</li>\n      <li parentName=\"ul\"><strong parentName=\"li\">{`endOfBlock`}</strong>{` - The value of 1 indicates that this is the last block in the data submission`}</li>\n    </ul>\n    <p><strong parentName=\"p\">{`Note:`}</strong>{` A metric is a number that represents a count or a ratio for something you want to measure. Examples of metrics are: revenue of a product, number of visits and number of page views.`}</p>\n    <pre><code parentName=\"pre\" {...{}}>{`PHP Code\n \n\n`}</code></pre>\n    <pre><code parentName=\"pre\" {...{}}>{`Java Code\n \nprivate void createClassificationsForTwitterHandles(IntegrationDetail integrationDetail, Data ConnectorsIntegrationWebServicePortType genesisIntegrationWebServicePortType) throws RemoteException\n    {\n         /* Define local parameters for method arguments */\n        String[] columnNames;\n        String endOfBlock;\n        String integrationCode;\n        String metricName;\n        String[][] rows;\n        IntHolder blockId;\n        IntHolder fileId;\n        StringHolder status;\n \n         /* Retrieve integration code */\n        integrationCode = integrationDetail.getIntegrationCode();\n         /* Set the metric name */\n        metricName = \"twitter_handle\";\n         /* Define column headers */\n        columnNames = new String[4];\n        columnNames[0] = \"Key\";\n        columnNames[1] = \"Gender\";\n        columnNames[2] = \"Age\";\n        columnNames[3] = \"Region\";\n \n         /* Read classification data from local file */\n        rows = getClassificationRowsFromFile();\n        endOfBlock = \"1\";\n        blockId = new IntHolder();\n        fileId = new IntHolder();\n        status = new StringHolder();\n \n/* Call the Partner API method for uploading classifications */\ngenesisIntegrationWebServicePortType.importUploadClassifications(columnNames, endOfBlock, integrationCode, metricName, rows, blockId, fileId, status);\n    }\n`}</code></pre>\n    <pre><code parentName=\"pre\" {...{}}>{`C# Code\n \npublic static void createClassificationsForTwitterHandles(integrationDetail partnerIntegrationDetail, Data ConnectorsIntegrationWebServicePortTypeClient genesisIntegrationWebServicePortTypeClient)\n    {\n  /* Define local parameters for method arguments */\n        String[] columnNames;\n        String endOfBlock;\n        String integrationCode;\n        String metricName;\n        String[][] rows;\n        int fileId;\n        String status;\n \n /* Retrieve integration code */\n        integrationCode = partnerIntegrationDetail.integrationCode;\n        metricName = \"twitter_handle\";\n /* Define column headers */\n        columnNames = new String[4];\n        columnNames[0] = \"Key\";\n        columnNames[1] = \"Gender\";\n        columnNames[2] = \"Age\";\n        columnNames[3] = \"Region\";\n \n  /* Read classification data from local file */\n        rows = getClassificationRowsFromFile();\n        endOfBlock = \"1\";\n  \n/* Call the Partner API method for uploading classifications */\ngenesisIntegrationWebServicePortTypeClient.ImportUploadClassifications(columnNames, endOfBlock, integrationCode, metricName, rows, out fileId, out status);\n    }\n`}</code></pre>\n    <h2 {...{\n      \"id\": \"classify-data-using-the-importuploadclassifications-method\"\n    }}><strong parentName=\"h2\">{`Classify data using the Import.UploadClassifications method`}</strong></h2>\n    <p>{`Now that you have created the createClassificationsForTwitterHandles method, you will return to the for loop in Step 1 to invoke the method. This will execute the function to create the classifications for each integration.`}</p>\n    <pre><code parentName=\"pre\" {...{}}>{`PHP Code\n \n\n`}</code></pre>\n    <pre><code parentName=\"pre\" {...{}}>{`Java Code\n \n for (IntegrationDetail integrationDetail : integrationDetails)\n            {\n/* Invoke createClassificationsForTwitterHandles method */\ncreateClassificationsForTwitterHandles(integrationDetail, genesisIntegrationWebServicePortType);\n                      System.out.println(\"Returned after classifying data.\");\n            }\n`}</code></pre>\n    <pre><code parentName=\"pre\" {...{}}>{`C# Code\n \n for (int i = 0; i < integrationDetails.Length; i++)\n      {\n                      createClassificationsForTwitterHandles(integrationDetails[i], genesisIntegrationWebServicePortTypeClient);\n      Console.WriteLine(\"Returned after classifying data.\");\n      }\n`}</code></pre>\n    <p><strong parentName=\"p\">{`Parent topic:`}</strong>{` `}<a parentName=\"p\" {...{\n        \"href\": \"c_Classify_Partner_data_using_the_Partner_API.md\"\n      }}>{`5. Classify Partner Data Tutorial`}</a></p>\n\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n      "],"sourceRoot":""}